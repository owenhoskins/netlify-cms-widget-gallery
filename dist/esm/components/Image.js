"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _css2 = _interopRequireDefault(require("@emotion/css"));

var _react = _interopRequireDefault(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _core = require("@emotion/core");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

// Handle legacy names for image queries.
const convertProps = props => {
  let convertedProps = _objectSpread({}, props);

  if (convertedProps.responsiveResolution) {
    convertedProps.resolutions = convertedProps.responsiveResolution;
    delete convertedProps.responsiveResolution;
  }

  if (convertedProps.responsiveSizes) {
    convertedProps.sizes = convertedProps.responsiveSizes;
    delete convertedProps.responsiveSizes;
  }

  return convertedProps;
}; // Cache if we've seen an image before so we don't both with
// lazy-loading & fading in on subsequent mounts.


const imageCache = {};

const inImageCache = props => {
  const convertedProps = convertProps(props); // Find src

  const src = convertedProps.sizes ? convertedProps.sizes.src : convertedProps.resolutions.src;

  if (imageCache[src]) {
    return true;
  } else {
    imageCache[src] = true;
    return false;
  }
};

let io;
const listeners = [];

function getIO() {
  if (typeof io === `undefined` && typeof window !== `undefined` && window.IntersectionObserver) {
    io = new window.IntersectionObserver(entries => {
      entries.forEach(entry => {
        listeners.forEach(l => {
          if (l[0] === entry.target) {
            // Edge doesn't currently support isIntersecting, so also test for an intersectionRatio > 0
            if (entry.isIntersecting || entry.intersectionRatio > 0) {
              //console.log('Observer: ', entry, entry.isIntersecting)
              io.unobserve(l[0]);
              l[1]();
            }
          }
        });
      });
    }, {
      rootMargin: `200px`
    });
  }

  return io;
}

const listenToIntersections = (el, cb) => {
  getIO().observe(el);
  listeners.push([el, cb]);
};

let isWebpSupportedCache = null;

const isWebpSupported = () => {
  if (isWebpSupportedCache !== null) {
    return isWebpSupportedCache;
  }

  const elem = typeof window !== `undefined` ? window.document.createElement(`canvas`) : {};

  if (elem.getContext && elem.getContext(`2d`)) {
    isWebpSupportedCache = elem.toDataURL(`image/webp`).indexOf(`data:image/webp`) === 0;
  } else {
    isWebpSupportedCache = false;
  }

  return isWebpSupportedCache;
};

const noscriptImg = props => {
  const _props$opacity = props.opacity,
        opacity = _props$opacity === void 0 ? `` : _props$opacity,
        src = props.src,
        srcSet = props.srcSet,
        _props$sizes = props.sizes,
        sizes = _props$sizes === void 0 ? `` : _props$sizes,
        _props$title = props.title,
        title = _props$title === void 0 ? `` : _props$title,
        _props$alt = props.alt,
        alt = _props$alt === void 0 ? `` : _props$alt,
        _props$width = props.width,
        width = _props$width === void 0 ? `` : _props$width,
        _props$height = props.height,
        height = _props$height === void 0 ? `` : _props$height,
        _props$transitionDela = props.transitionDelay,
        transitionDelay = _props$transitionDela === void 0 ? `` : _props$transitionDela;
  return `<img width=${width} height=${height} src="${src}" srcset="${srcSet}" alt="${alt}" title="${title}" sizes="${sizes}" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:${transitionDelay};opacity:${opacity};width:100%;height:100%;object-fit:contain;objectPosition:center"/>`;
};

const Img = props => {
  const style = props.style,
        objectFit = props.objectFit,
        objectPosition = props.objectPosition,
        opacity = props.opacity,
        onLoad = props.onLoad,
        _props$transitionDela2 = props.transitionDelay,
        transitionDelay = _props$transitionDela2 === void 0 ? `` : _props$transitionDela2,
        otherProps = _objectWithoutProperties(props, ["style", "objectFit", "objectPosition", "opacity", "onLoad", "transitionDelay"]);

  return (0, _core.jsx)("img", _extends({
    draggable: "false",
    ondragstart: "return false;"
  }, otherProps, {
    onLoad: onLoad,
    css:
    /*#__PURE__*/
    (0, _css2.default)(_objectSpread({
      position: `absolute`,
      top: 0,
      left: 0,
      transition: `opacity 1s`,
      transitionDelay,
      opacity,
      width: `100%`,
      height: `100%`,
      objectFit: objectFit ? objectFit : `contain`,
      objectPosition: objectPosition ? objectPosition : `top center`,
      fontFamily: `'object-fit: ${objectFit ? objectFit : 'contain'}; object-position: ${objectPosition ? objectPosition : 'top center'};'`
    }, style), "label:Img;" + (process.env.NODE_ENV === "production" ? "" : "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL0ltYWdlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQW9ITSIsImZpbGUiOiIuLi8uLi8uLi9zcmMvY29tcG9uZW50cy9JbWFnZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCJcbmltcG9ydCB7anN4fSBmcm9tICdAZW1vdGlvbi9jb3JlJ1xuXG4vLyBIYW5kbGUgbGVnYWN5IG5hbWVzIGZvciBpbWFnZSBxdWVyaWVzLlxuY29uc3QgY29udmVydFByb3BzID0gcHJvcHMgPT4ge1xuICBsZXQgY29udmVydGVkUHJvcHMgPSB7IC4uLnByb3BzIH1cbiAgaWYgKGNvbnZlcnRlZFByb3BzLnJlc3BvbnNpdmVSZXNvbHV0aW9uKSB7XG4gICAgY29udmVydGVkUHJvcHMucmVzb2x1dGlvbnMgPSBjb252ZXJ0ZWRQcm9wcy5yZXNwb25zaXZlUmVzb2x1dGlvblxuICAgIGRlbGV0ZSBjb252ZXJ0ZWRQcm9wcy5yZXNwb25zaXZlUmVzb2x1dGlvblxuICB9XG4gIGlmIChjb252ZXJ0ZWRQcm9wcy5yZXNwb25zaXZlU2l6ZXMpIHtcbiAgICBjb252ZXJ0ZWRQcm9wcy5zaXplcyA9IGNvbnZlcnRlZFByb3BzLnJlc3BvbnNpdmVTaXplc1xuICAgIGRlbGV0ZSBjb252ZXJ0ZWRQcm9wcy5yZXNwb25zaXZlU2l6ZXNcbiAgfVxuXG4gIHJldHVybiBjb252ZXJ0ZWRQcm9wc1xufVxuXG4vLyBDYWNoZSBpZiB3ZSd2ZSBzZWVuIGFuIGltYWdlIGJlZm9yZSBzbyB3ZSBkb24ndCBib3RoIHdpdGhcbi8vIGxhenktbG9hZGluZyAmIGZhZGluZyBpbiBvbiBzdWJzZXF1ZW50IG1vdW50cy5cbmNvbnN0IGltYWdlQ2FjaGUgPSB7fVxuY29uc3QgaW5JbWFnZUNhY2hlID0gcHJvcHMgPT4ge1xuICBjb25zdCBjb252ZXJ0ZWRQcm9wcyA9IGNvbnZlcnRQcm9wcyhwcm9wcylcbiAgLy8gRmluZCBzcmNcbiAgY29uc3Qgc3JjID0gY29udmVydGVkUHJvcHMuc2l6ZXNcbiAgICA/IGNvbnZlcnRlZFByb3BzLnNpemVzLnNyY1xuICAgIDogY29udmVydGVkUHJvcHMucmVzb2x1dGlvbnMuc3JjXG5cbiAgaWYgKGltYWdlQ2FjaGVbc3JjXSkge1xuICAgIHJldHVybiB0cnVlXG4gIH0gZWxzZSB7XG4gICAgaW1hZ2VDYWNoZVtzcmNdID0gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbmxldCBpb1xuY29uc3QgbGlzdGVuZXJzID0gW11cblxuZnVuY3Rpb24gZ2V0SU8oKSB7XG4gIGlmIChcbiAgICB0eXBlb2YgaW8gPT09IGB1bmRlZmluZWRgICYmXG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gYHVuZGVmaW5lZGAgJiZcbiAgICB3aW5kb3cuSW50ZXJzZWN0aW9uT2JzZXJ2ZXJcbiAgKSB7XG4gICAgaW8gPSBuZXcgd2luZG93LkludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgZW50cmllcyA9PiB7XG4gICAgICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICAgICAgbGlzdGVuZXJzLmZvckVhY2gobCA9PiB7XG4gICAgICAgICAgICBpZiAobFswXSA9PT0gZW50cnkudGFyZ2V0KSB7XG4gICAgICAgICAgICAgIC8vIEVkZ2UgZG9lc24ndCBjdXJyZW50bHkgc3VwcG9ydCBpc0ludGVyc2VjdGluZywgc28gYWxzbyB0ZXN0IGZvciBhbiBpbnRlcnNlY3Rpb25SYXRpbyA+IDBcbiAgICAgICAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nIHx8IGVudHJ5LmludGVyc2VjdGlvblJhdGlvID4gMCkge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ09ic2VydmVyOiAnLCBlbnRyeSwgZW50cnkuaXNJbnRlcnNlY3RpbmcpXG4gICAgICAgICAgICAgICAgaW8udW5vYnNlcnZlKGxbMF0pXG4gICAgICAgICAgICAgICAgbFsxXSgpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIHsgcm9vdE1hcmdpbjogYDIwMHB4YCB9XG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIGlvXG59XG5cbmNvbnN0IGxpc3RlblRvSW50ZXJzZWN0aW9ucyA9IChlbCwgY2IpID0+IHtcbiAgZ2V0SU8oKS5vYnNlcnZlKGVsKVxuICBsaXN0ZW5lcnMucHVzaChbZWwsIGNiXSlcbn1cblxubGV0IGlzV2VicFN1cHBvcnRlZENhY2hlID0gbnVsbFxuY29uc3QgaXNXZWJwU3VwcG9ydGVkID0gKCkgPT4ge1xuICBpZiAoaXNXZWJwU3VwcG9ydGVkQ2FjaGUgIT09IG51bGwpIHtcbiAgICByZXR1cm4gaXNXZWJwU3VwcG9ydGVkQ2FjaGVcbiAgfVxuXG4gIGNvbnN0IGVsZW0gPVxuICAgIHR5cGVvZiB3aW5kb3cgIT09IGB1bmRlZmluZWRgID8gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYGNhbnZhc2ApIDoge31cbiAgaWYgKGVsZW0uZ2V0Q29udGV4dCAmJiBlbGVtLmdldENvbnRleHQoYDJkYCkpIHtcbiAgICBpc1dlYnBTdXBwb3J0ZWRDYWNoZSA9XG4gICAgICBlbGVtLnRvRGF0YVVSTChgaW1hZ2Uvd2VicGApLmluZGV4T2YoYGRhdGE6aW1hZ2Uvd2VicGApID09PSAwXG4gIH0gZWxzZSB7XG4gICAgaXNXZWJwU3VwcG9ydGVkQ2FjaGUgPSBmYWxzZVxuICB9XG5cbiAgcmV0dXJuIGlzV2VicFN1cHBvcnRlZENhY2hlXG59XG5cbmNvbnN0IG5vc2NyaXB0SW1nID0gcHJvcHMgPT4ge1xuICBjb25zdCB7XG4gICAgb3BhY2l0eSA9IGBgLFxuICAgIHNyYyxcbiAgICBzcmNTZXQsXG4gICAgc2l6ZXMgPSBgYCxcbiAgICB0aXRsZSA9IGBgLFxuICAgIGFsdCA9IGBgLFxuICAgIHdpZHRoID0gYGAsXG4gICAgaGVpZ2h0ID0gYGAsXG4gICAgdHJhbnNpdGlvbkRlbGF5ID0gYGAsXG4gIH0gPSBwcm9wc1xuICByZXR1cm4gYDxpbWcgd2lkdGg9JHt3aWR0aH0gaGVpZ2h0PSR7aGVpZ2h0fSBzcmM9XCIke3NyY31cIiBzcmNzZXQ9XCIke3NyY1NldH1cIiBhbHQ9XCIke2FsdH1cIiB0aXRsZT1cIiR7dGl0bGV9XCIgc2l6ZXM9XCIke3NpemVzfVwiIHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO3RyYW5zaXRpb246b3BhY2l0eSAwLjVzO3RyYW5zaXRpb24tZGVsYXk6JHt0cmFuc2l0aW9uRGVsYXl9O29wYWNpdHk6JHtvcGFjaXR5fTt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO29iamVjdC1maXQ6Y29udGFpbjtvYmplY3RQb3NpdGlvbjpjZW50ZXJcIi8+YFxufVxuXG5jb25zdCBJbWcgPSBwcm9wcyA9PiB7XG4gIGNvbnN0IHsgc3R5bGUsIG9iamVjdEZpdCwgb2JqZWN0UG9zaXRpb24sIG9wYWNpdHksIG9uTG9hZCwgdHJhbnNpdGlvbkRlbGF5ID0gYGAsIC4uLm90aGVyUHJvcHMgfSA9IHByb3BzXG5cbiAgcmV0dXJuIChcbiAgICA8aW1nXG4gICAgICBkcmFnZ2FibGU9XCJmYWxzZVwiXG4gICAgICBvbmRyYWdzdGFydD1cInJldHVybiBmYWxzZTtcIlxuICAgICAgey4uLm90aGVyUHJvcHN9XG4gICAgICBvbkxvYWQ9e29uTG9hZH1cbiAgICAgIGNzcz17e1xuICAgICAgICBwb3NpdGlvbjogYGFic29sdXRlYCxcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICB0cmFuc2l0aW9uOiBgb3BhY2l0eSAxc2AsXG4gICAgICAgIHRyYW5zaXRpb25EZWxheSxcbiAgICAgICAgb3BhY2l0eSxcbiAgICAgICAgd2lkdGg6IGAxMDAlYCxcbiAgICAgICAgaGVpZ2h0OiBgMTAwJWAsXG4gICAgICAgIG9iamVjdEZpdDogb2JqZWN0Rml0ID8gb2JqZWN0Rml0IDogYGNvbnRhaW5gLFxuICAgICAgICBvYmplY3RQb3NpdGlvbjogb2JqZWN0UG9zaXRpb24gPyBvYmplY3RQb3NpdGlvbiA6IGB0b3AgY2VudGVyYCxcbiAgICAgICAgZm9udEZhbWlseTogYCdvYmplY3QtZml0OiAke29iamVjdEZpdCA/IG9iamVjdEZpdCA6ICdjb250YWluJ307IG9iamVjdC1wb3NpdGlvbjogJHtvYmplY3RQb3NpdGlvbiA/IG9iamVjdFBvc2l0aW9uIDogJ3RvcCBjZW50ZXInfTsnYCxcbiAgICAgICAgLi4uc3R5bGVcbiAgICAgIH19XG4gICAgLz5cbiAgKVxufVxuXG5JbWcucHJvcFR5cGVzID0ge1xuICBvcGFjaXR5OiBQcm9wVHlwZXMubnVtYmVyLFxuICB0cmFuc2l0aW9uRGVsYXk6IFByb3BUeXBlcy5zdHJpbmcsXG4gIG9uTG9hZDogUHJvcFR5cGVzLmZ1bmMsXG59XG5cbmNsYXNzIEltYWdlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcblxuICAgIC8vIElmIHRoaXMgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgdGhlIEludGVyc2VjdGlvbk9ic2VydmVyIEFQSVxuICAgIC8vIHdlIGRlZmF1bHQgdG8gc3RhcnQgZG93bmxvYWRpbmcgdGhlIGltYWdlIHJpZ2h0IGF3YXkuXG4gICAgbGV0IGlzVmlzaWJsZSA9IHRydWVcbiAgICBsZXQgaW1nTG9hZGVkID0gdHJ1ZVxuICAgIGxldCBJT1N1cHBvcnRlZCA9IGZhbHNlXG5cbiAgICAvLyBJZiB0aGlzIGltYWdlIGhhcyBhbHJlYWR5IGJlZW4gbG9hZGVkIGJlZm9yZSB0aGVuIHdlIGNhbiBhc3N1bWUgaXQnc1xuICAgIC8vIGFscmVhZHkgaW4gdGhlIGJyb3dzZXIgY2FjaGUgc28gaXQncyBjaGVhcCB0byBqdXN0IHNob3cgZGlyZWN0bHkuXG4gICAgY29uc3Qgc2VlbkJlZm9yZSA9IGluSW1hZ2VDYWNoZShwcm9wcylcblxuICAgIGlmIChcbiAgICAgICFzZWVuQmVmb3JlICYmXG4gICAgICB0eXBlb2Ygd2luZG93ICE9PSBgdW5kZWZpbmVkYCAmJlxuICAgICAgd2luZG93LkludGVyc2VjdGlvbk9ic2VydmVyXG4gICAgKSB7XG4gICAgICBpc1Zpc2libGUgPSBmYWxzZVxuICAgICAgaW1nTG9hZGVkID0gZmFsc2VcbiAgICAgIElPU3VwcG9ydGVkID0gdHJ1ZVxuICAgIH1cblxuICAgIC8vIEFsd2F5cyBkb24ndCByZW5kZXIgaW1hZ2Ugd2hpbGUgc2VydmVyIHJlbmRlcmluZ1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBgdW5kZWZpbmVkYCkge1xuICAgICAgaXNWaXNpYmxlID0gZmFsc2VcbiAgICAgIGltZ0xvYWRlZCA9IGZhbHNlXG4gICAgfVxuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGlzVmlzaWJsZSxcbiAgICAgIGltZ0xvYWRlZCxcbiAgICAgIElPU3VwcG9ydGVkLFxuICAgICAgc2hvd0Jhc2U2NDogdHJ1ZVxuICAgIH1cblxuICAgIHRoaXMuaGFuZGxlUmVmID0gdGhpcy5oYW5kbGVSZWYuYmluZCh0aGlzKVxuICB9XG5cbiAgaGFuZGxlUmVmKHJlZikge1xuICAgIGlmICh0aGlzLnN0YXRlLklPU3VwcG9ydGVkICYmIHJlZikge1xuICAgICAgbGlzdGVuVG9JbnRlcnNlY3Rpb25zKHJlZiwgKCkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNWaXNpYmxlOiB0cnVlLCBpbWdMb2FkZWQ6IGZhbHNlIH0pXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7XG4gICAgICB0aXRsZSxcbiAgICAgIGFsdCxcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIG91dGVyV3JhcHBlckNsYXNzTmFtZSxcbiAgICAgIG91dGVyQ3NzID0ge30sXG4gICAgICBpbm5lckNzcyA9IHt9LFxuICAgICAgc3R5bGUgPSB7fSxcbiAgICAgIHNpemVzLFxuICAgICAgcmVzb2x1dGlvbnMsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3IsXG4gICAgICBvYmplY3RGaXQsXG4gICAgICBvYmplY3RQb3NpdGlvbixcbiAgICAgIGN1c3RvbUFzcGVjdCxcbiAgICAgIGJhc2U2NFN0eWxlXG4gICAgfSA9IGNvbnZlcnRQcm9wcyh0aGlzLnByb3BzKVxuXG5cbiAgICBsZXQgYmdDb2xvclxuICAgIGlmICh0eXBlb2YgYmFja2dyb3VuZENvbG9yID09PSBgYm9vbGVhbmApIHtcbiAgICAgIGJnQ29sb3IgPSBgbGlnaHRncmF5YFxuICAgIH0gZWxzZSB7XG4gICAgICBiZ0NvbG9yID0gYmFja2dyb3VuZENvbG9yXG4gICAgfVxuXG4gICAgaWYgKHNpemVzKSB7XG4gICAgICBjb25zdCBpbWFnZSA9IHNpemVzXG5cbiAgICAgIC8vIFVzZSB3ZWJwIGJ5IGRlZmF1bHQgaWYgYnJvd3NlciBzdXBwb3J0cyBpdFxuICAgICAgaWYgKGltYWdlLnNyY1dlYnAgJiYgaW1hZ2Uuc3JjU2V0V2VicCAmJiBpc1dlYnBTdXBwb3J0ZWQoKSkge1xuICAgICAgICBpbWFnZS5zcmMgPSBpbWFnZS5zcmNXZWJwXG4gICAgICAgIGltYWdlLnNyY1NldCA9IGltYWdlLnNyY1NldFdlYnBcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGVmYXVsdEFzcGVjdCA9IHtcbiAgICAgICAgd2lkdGg6IGAxMDAlYCxcbiAgICAgICAgcGFkZGluZ0JvdHRvbTogYCR7MTAwIC8gaW1hZ2UuYXNwZWN0UmF0aW99JWAsXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRlZmF1bHRCYXNlNjRTdHlsZSA9IHtcbiAgICAgICAgZmlsdGVyOiB0aGlzLnN0YXRlLnNob3dCYXNlNjQgPyAnYmx1cigxNXB4KScgOiAnJyxcbiAgICAgICAgdHJhbnNmb3JtOiB0aGlzLnN0YXRlLnNob3dCYXNlNjQgPyAnc2NhbGUoMS41KScgOiAnJ1xuICAgICAgfVxuICAgICAgLy8gVGhlIG91dGVyIGRpdiBpcyBuZWNlc3NhcnkgdG8gcmVzZXQgdGhlIHotaW5kZXggdG8gMC5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzc05hbWU9e2BpbWFnZS1vdXRlci13cmFwcGVyYH1cbiAgICAgICAgICBjc3M9e3tcbiAgICAgICAgICAgIHpJbmRleDogMCxcbiAgICAgICAgICAgIC8vIExldCB1c2VycyBzZXQgY29tcG9uZW50IHRvIGJlIGFic29sdXRlbHkgcG9zaXRpb25lZC5cbiAgICAgICAgICAgIHBvc2l0aW9uOiBzdHlsZS5wb3NpdGlvbiA9PT0gYGFic29sdXRlYCA/IGBpbml0aWFsYCA6IGByZWxhdGl2ZWAsXG4gICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgIH19XG4gICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgIC4uLm91dGVyQ3NzXG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzTmFtZT17YGdhdHNieS1pbWFnZS13cmFwcGVyYH1cbiAgICAgICAgICAgIGNzcz17e1xuICAgICAgICAgICAgICBwb3NpdGlvbjogYHJlbGF0aXZlYCxcbiAgICAgICAgICAgICAgb3ZlcmZsb3c6IGBoaWRkZW5gLFxuICAgICAgICAgICAgICB6SW5kZXg6IDEsXG4gICAgICAgICAgICAgIC4uLmlubmVyQ3NzLFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIHJlZj17dGhpcy5oYW5kbGVSZWZ9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgey8qIFByZXNlcnZlIHRoZSBhc3BlY3QgcmF0aW8uICovfVxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgIC4uLihjdXN0b21Bc3BlY3QgPyBjdXN0b21Bc3BlY3QgOiBkZWZhdWx0QXNwZWN0KVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgey8qIFNob3cgdGhlIGJsdXJ5IGJhc2U2NCBpbWFnZS4gdGhpcy5zdGF0ZS5zaG93QmFzZTY0ICYmICAqL31cbiAgICAgICAgICAgIHtpbWFnZS5iYXNlNjQgJiYgKFxuICAgICAgICAgICAgICA8SW1nXG4gICAgICAgICAgICAgICAgYWx0PXthbHR9XG4gICAgICAgICAgICAgICAgdGl0bGU9e3RpdGxlfVxuICAgICAgICAgICAgICAgIHNyYz17aW1hZ2UuYmFzZTY0fVxuICAgICAgICAgICAgICAgIG9wYWNpdHk9eyF0aGlzLnN0YXRlLmltZ0xvYWRlZCA/IDAuNSA6IDB9XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbkRlbGF5PXtgMC41c2B9XG4gICAgICAgICAgICAgICAgb2JqZWN0Rml0PXtvYmplY3RGaXR9XG4gICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgIC4uLihiYXNlNjRTdHlsZSA/IGJhc2U2NFN0eWxlIDogZGVmYXVsdEJhc2U2NFN0eWxlKVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7LyogU2hvdyB0aGUgdHJhY2VkIFNWRyBpbWFnZS4gKi99XG4gICAgICAgICAgICB7aW1hZ2UudHJhY2VkU1ZHICYmIChcbiAgICAgICAgICAgICAgPEltZ1xuICAgICAgICAgICAgICAgIGFsdD17YWx0fVxuICAgICAgICAgICAgICAgIHRpdGxlPXt0aXRsZX1cbiAgICAgICAgICAgICAgICBzcmM9e2ltYWdlLnRyYWNlZFNWR31cbiAgICAgICAgICAgICAgICBvcGFjaXR5PXshdGhpcy5zdGF0ZS5pbWdMb2FkZWQgPyAxIDogMH1cbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uRGVsYXk9e2AwLjI1c2B9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7LyogU2hvdyBhIHNvbGlkIGJhY2tncm91bmQgY29sb3IuICovfVxuICAgICAgICAgICAge2JnQ29sb3IgJiYgKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgdGl0bGU9e3RpdGxlfVxuICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJnQ29sb3IsXG4gICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYGFic29sdXRlYCxcbiAgICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgICAgICAgICAgIG9wYWNpdHk6ICF0aGlzLnN0YXRlLmltZ0xvYWRlZCA/IDEgOiAwLFxuICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbkRlbGF5OiBgMC4zNXNgLFxuICAgICAgICAgICAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7LyogT25jZSB0aGUgaW1hZ2UgaXMgdmlzaWJsZSAob3IgdGhlIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IEludGVyc2VjdGlvbk9ic2VydmVyKSwgc3RhcnQgZG93bmxvYWRpbmcgdGhlIGltYWdlICovfVxuICAgICAgICAgICAge3RoaXMuc3RhdGUuaXNWaXNpYmxlICYmIChcbiAgICAgICAgICAgICAgPEltZ1xuICAgICAgICAgICAgICAgIGFsdD17YWx0fVxuICAgICAgICAgICAgICAgIHRpdGxlPXt0aXRsZX1cbiAgICAgICAgICAgICAgICBzcmNTZXQ9e2ltYWdlLnNyY1NldH1cbiAgICAgICAgICAgICAgICBzcmM9e2ltYWdlLnNyY31cbiAgICAgICAgICAgICAgICBzaXplcz17aW1hZ2Uuc2l6ZXN9XG4gICAgICAgICAgICAgICAgb2JqZWN0Rml0PXtvYmplY3RGaXR9XG4gICAgICAgICAgICAgICAgb2JqZWN0UG9zaXRpb249e29iamVjdFBvc2l0aW9ufVxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb25EZWxheT17YDAuNXNgfVxuICAgICAgICAgICAgICAgIG9wYWNpdHk9e1xuICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pbWdMb2FkZWQgfHwgdGhpcy5wcm9wcy5mYWRlSW4gPT09IGZhbHNlID8gMSA6IDBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb25Mb2FkPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLklPU3VwcG9ydGVkICYmIHRoaXMuc2V0U3RhdGUoeyBpbWdMb2FkZWQ6IHRydWUgfSlcbiAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25Mb2FkICYmIHRoaXMucHJvcHMub25Mb2FkKClcbiAgICAgICAgICAgICAgICAgIC8vc2V0VGltZW91dCgoKSA9PiB0aGlzLnNldFN0YXRlKHtzaG93QmFzZTY0OiBmYWxzZX0pLCA1MDApXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIHsvKiBTaG93IHRoZSBvcmlnaW5hbCBpbWFnZSBkdXJpbmcgc2VydmVyLXNpZGUgcmVuZGVyaW5nIGlmIEphdmFTY3JpcHQgaXMgZGlzYWJsZWQgKi99XG4gICAgICAgICAgICA8bm9zY3JpcHRcbiAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tcbiAgICAgICAgICAgICAgICBfX2h0bWw6IG5vc2NyaXB0SW1nKHsgYWx0LCB0aXRsZSwgLi4uaW1hZ2UgfSksXG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAocmVzb2x1dGlvbnMpIHtcbiAgICAgIGNvbnN0IGltYWdlID0gcmVzb2x1dGlvbnNcbiAgICAgIGNvbnN0IGRpdlN0eWxlID0ge1xuICAgICAgICBwb3NpdGlvbjogYHJlbGF0aXZlYCxcbiAgICAgICAgb3ZlcmZsb3c6IGBoaWRkZW5gLFxuICAgICAgICBkaXNwbGF5OiBgaW5saW5lLWJsb2NrYCxcbiAgICAgICAgekluZGV4OiAxLFxuICAgICAgICB3aWR0aDogaW1hZ2Uud2lkdGgsXG4gICAgICAgIGhlaWdodDogaW1hZ2UuaGVpZ2h0LFxuICAgICAgICAuLi5zdHlsZSxcbiAgICAgIH1cblxuICAgICAgaWYgKHN0eWxlLmRpc3BsYXkgPT09IGBpbmhlcml0YCkge1xuICAgICAgICBkZWxldGUgZGl2U3R5bGUuZGlzcGxheVxuICAgICAgfVxuXG4gICAgICAvLyBVc2Ugd2VicCBieSBkZWZhdWx0IGlmIGJyb3dzZXIgc3VwcG9ydHMgaXRcbiAgICAgIGlmIChpbWFnZS5zcmNXZWJwICYmIGltYWdlLnNyY1NldFdlYnAgJiYgaXNXZWJwU3VwcG9ydGVkKCkpIHtcbiAgICAgICAgaW1hZ2Uuc3JjID0gaW1hZ2Uuc3JjV2VicFxuICAgICAgICBpbWFnZS5zcmNTZXQgPSBpbWFnZS5zcmNTZXRXZWJwXG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBvdXRlciBkaXYgaXMgbmVjZXNzYXJ5IHRvIHJlc2V0IHRoZSB6LWluZGV4IHRvIDAuXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3NOYW1lPXtgJHtcbiAgICAgICAgICAgIG91dGVyV3JhcHBlckNsYXNzTmFtZSA/IG91dGVyV3JhcHBlckNsYXNzTmFtZSA6IGBgXG4gICAgICAgICAgfSBnYXRzYnktaW1hZ2Utb3V0ZXItd3JhcHBlcmB9XG4gICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgIHpJbmRleDogMCxcbiAgICAgICAgICAgIC8vIExldCB1c2VycyBzZXQgY29tcG9uZW50IHRvIGJlIGFic29sdXRlbHkgcG9zaXRpb25lZC5cbiAgICAgICAgICAgIHBvc2l0aW9uOiBzdHlsZS5wb3NpdGlvbiA9PT0gYGFic29sdXRlYCA/IGBpbml0aWFsYCA6IGByZWxhdGl2ZWAsXG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7Y2xhc3NOYW1lID8gY2xhc3NOYW1lIDogYGB9IGdhdHNieS1pbWFnZS13cmFwcGVyYH1cbiAgICAgICAgICAgIHN0eWxlPXtkaXZTdHlsZX1cbiAgICAgICAgICAgIHJlZj17dGhpcy5oYW5kbGVSZWZ9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgey8qIFNob3cgdGhlIGJsdXJ5IGJhc2U2NCBpbWFnZS4gKi99XG4gICAgICAgICAgICB7aW1hZ2UuYmFzZTY0ICYmIChcbiAgICAgICAgICAgICAgPEltZ1xuICAgICAgICAgICAgICAgIGFsdD17YWx0fVxuICAgICAgICAgICAgICAgIHRpdGxlPXt0aXRsZX1cbiAgICAgICAgICAgICAgICBzcmM9e2ltYWdlLmJhc2U2NH1cbiAgICAgICAgICAgICAgICBvcGFjaXR5PXshdGhpcy5zdGF0ZS5pbWdMb2FkZWQgPyAxIDogMH1cbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uRGVsYXk9e2AwLjM1c2B9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7LyogU2hvdyB0aGUgdHJhY2VkIFNWRyBpbWFnZS4gKi99XG4gICAgICAgICAgICB7aW1hZ2UudHJhY2VkU1ZHICYmIChcbiAgICAgICAgICAgICAgPEltZ1xuICAgICAgICAgICAgICAgIGFsdD17YWx0fVxuICAgICAgICAgICAgICAgIHRpdGxlPXt0aXRsZX1cbiAgICAgICAgICAgICAgICBzcmM9e2ltYWdlLnRyYWNlZFNWR31cbiAgICAgICAgICAgICAgICBvcGFjaXR5PXshdGhpcy5zdGF0ZS5pbWdMb2FkZWQgPyAxIDogMH1cbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uRGVsYXk9e2AwLjI1c2B9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7LyogU2hvdyBhIHNvbGlkIGJhY2tncm91bmQgY29sb3IuICovfVxuICAgICAgICAgICAge2JnQ29sb3IgJiYgKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgdGl0bGU9e3RpdGxlfVxuICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJnQ29sb3IsXG4gICAgICAgICAgICAgICAgICB3aWR0aDogaW1hZ2Uud2lkdGgsXG4gICAgICAgICAgICAgICAgICBvcGFjaXR5OiAhdGhpcy5zdGF0ZS5pbWdMb2FkZWQgPyAxIDogMCxcbiAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25EZWxheTogYDAuMjVzYCxcbiAgICAgICAgICAgICAgICAgIGhlaWdodDogaW1hZ2UuaGVpZ2h0LFxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7LyogT25jZSB0aGUgaW1hZ2UgaXMgdmlzaWJsZSwgc3RhcnQgZG93bmxvYWRpbmcgdGhlIGltYWdlICovfVxuICAgICAgICAgICAge3RoaXMuc3RhdGUuaXNWaXNpYmxlICYmIChcbiAgICAgICAgICAgICAgPEltZ1xuICAgICAgICAgICAgICAgIGFsdD17YWx0fVxuICAgICAgICAgICAgICAgIHRpdGxlPXt0aXRsZX1cbiAgICAgICAgICAgICAgICB3aWR0aD17aW1hZ2Uud2lkdGh9XG4gICAgICAgICAgICAgICAgaGVpZ2h0PXtpbWFnZS5oZWlnaHR9XG4gICAgICAgICAgICAgICAgc3JjU2V0PXtpbWFnZS5zcmNTZXR9XG4gICAgICAgICAgICAgICAgc3JjPXtpbWFnZS5zcmN9XG4gICAgICAgICAgICAgICAgb3BhY2l0eT17XG4gICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmltZ0xvYWRlZCB8fCB0aGlzLnByb3BzLmZhZGVJbiA9PT0gZmFsc2UgPyAxIDogMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvbkxvYWQ9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpbWdMb2FkZWQ6IHRydWUgfSlcbiAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25Mb2FkICYmIHRoaXMucHJvcHMub25Mb2FkKClcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgey8qIFNob3cgdGhlIG9yaWdpbmFsIGltYWdlIGR1cmluZyBzZXJ2ZXItc2lkZSByZW5kZXJpbmcgaWYgSmF2YVNjcmlwdCBpcyBkaXNhYmxlZCAqL31cbiAgICAgICAgICAgIDxub3NjcmlwdFxuICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e1xuICAgICAgICAgICAgICAgIF9faHRtbDogbm9zY3JpcHRJbWcoe1xuICAgICAgICAgICAgICAgICAgYWx0LFxuICAgICAgICAgICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgICAgICAgICB3aWR0aDogaW1hZ2Uud2lkdGgsXG4gICAgICAgICAgICAgICAgICBoZWlnaHQ6IGltYWdlLmhlaWdodCxcbiAgICAgICAgICAgICAgICAgIC4uLmltYWdlLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG5JbWFnZS5kZWZhdWx0UHJvcHMgPSB7XG4gIGZhZGVJbjogdHJ1ZSxcbiAgYWx0OiBgYCxcbn1cblxuSW1hZ2UucHJvcFR5cGVzID0ge1xuICByZXNwb25zaXZlUmVzb2x1dGlvbjogUHJvcFR5cGVzLm9iamVjdCxcbiAgcmVzcG9uc2l2ZVNpemVzOiBQcm9wVHlwZXMub2JqZWN0LFxuICByZXNvbHV0aW9uczogUHJvcFR5cGVzLm9iamVjdCxcbiAgc2l6ZXM6IFByb3BUeXBlcy5vYmplY3QsXG4gIGZhZGVJbjogUHJvcFR5cGVzLmJvb2wsXG4gIHRpdGxlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBhbHQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGNsYXNzTmFtZTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZywgUHJvcFR5cGVzLm9iamVjdF0pLCAvLyBTdXBwb3J0IEdsYW1vcidzIGNzcyBwcm9wLlxuICBvdXRlcldyYXBwZXJDbGFzc05hbWU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgIFByb3BUeXBlcy5zdHJpbmcsXG4gICAgUHJvcFR5cGVzLm9iamVjdCxcbiAgXSksXG4gIHN0eWxlOiBQcm9wVHlwZXMub2JqZWN0LFxuICBwb3NpdGlvbjogUHJvcFR5cGVzLnN0cmluZyxcbiAgYmFja2dyb3VuZENvbG9yOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMuYm9vbF0pLFxuICBvbkxvYWQ6IFByb3BUeXBlcy5mdW5jLFxufVxuXG5leHBvcnQgZGVmYXVsdCBJbWFnZSJdfQ== */"))
  }));
};

Img.propTypes = {
  opacity: _propTypes.default.number,
  transitionDelay: _propTypes.default.string,
  onLoad: _propTypes.default.func
};

class Image extends _react.default.Component {
  constructor(props) {
    super(props); // If this browser doesn't support the IntersectionObserver API
    // we default to start downloading the image right away.

    let isVisible = true;
    let imgLoaded = true;
    let IOSupported = false; // If this image has already been loaded before then we can assume it's
    // already in the browser cache so it's cheap to just show directly.

    const seenBefore = inImageCache(props);

    if (!seenBefore && typeof window !== `undefined` && window.IntersectionObserver) {
      isVisible = false;
      imgLoaded = false;
      IOSupported = true;
    } // Always don't render image while server rendering


    if (typeof window === `undefined`) {
      isVisible = false;
      imgLoaded = false;
    }

    this.state = {
      isVisible,
      imgLoaded,
      IOSupported,
      showBase64: true
    };
    this.handleRef = this.handleRef.bind(this);
  }

  handleRef(ref) {
    if (this.state.IOSupported && ref) {
      listenToIntersections(ref, () => {
        this.setState({
          isVisible: true,
          imgLoaded: false
        });
      });
    }
  }

  render() {
    const _convertProps = convertProps(this.props),
          title = _convertProps.title,
          alt = _convertProps.alt,
          className = _convertProps.className,
          outerWrapperClassName = _convertProps.outerWrapperClassName,
          _convertProps$outerCs = _convertProps.outerCss,
          outerCss = _convertProps$outerCs === void 0 ? {} : _convertProps$outerCs,
          _convertProps$innerCs = _convertProps.innerCss,
          innerCss = _convertProps$innerCs === void 0 ? {} : _convertProps$innerCs,
          _convertProps$style = _convertProps.style,
          style = _convertProps$style === void 0 ? {} : _convertProps$style,
          sizes = _convertProps.sizes,
          resolutions = _convertProps.resolutions,
          backgroundColor = _convertProps.backgroundColor,
          objectFit = _convertProps.objectFit,
          objectPosition = _convertProps.objectPosition,
          customAspect = _convertProps.customAspect,
          base64Style = _convertProps.base64Style;

    let bgColor;

    if (typeof backgroundColor === `boolean`) {
      bgColor = `lightgray`;
    } else {
      bgColor = backgroundColor;
    }

    if (sizes) {
      const image = sizes; // Use webp by default if browser supports it

      if (image.srcWebp && image.srcSetWebp && isWebpSupported()) {
        image.src = image.srcWebp;
        image.srcSet = image.srcSetWebp;
      }

      const defaultAspect = {
        width: `100%`,
        paddingBottom: `${100 / image.aspectRatio}%`
      };
      const defaultBase64Style = {
        filter: this.state.showBase64 ? 'blur(15px)' : '',
        transform: this.state.showBase64 ? 'scale(1.5)' : '' // The outer div is necessary to reset the z-index to 0.

      };
      return (0, _core.jsx)("div", {
        className: `image-outer-wrapper`,
        css:
        /*#__PURE__*/
        (0, _css2.default)({
          zIndex: 0,
          // Let users set component to be absolutely positioned.
          position: style.position === `absolute` ? `initial` : `relative`,
          width: '100%'
        }, "label:Image;" + (process.env.NODE_ENV === "production" ? "" : "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL0ltYWdlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTRPVSIsImZpbGUiOiIuLi8uLi8uLi9zcmMvY29tcG9uZW50cy9JbWFnZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCJcbmltcG9ydCB7anN4fSBmcm9tICdAZW1vdGlvbi9jb3JlJ1xuXG4vLyBIYW5kbGUgbGVnYWN5IG5hbWVzIGZvciBpbWFnZSBxdWVyaWVzLlxuY29uc3QgY29udmVydFByb3BzID0gcHJvcHMgPT4ge1xuICBsZXQgY29udmVydGVkUHJvcHMgPSB7IC4uLnByb3BzIH1cbiAgaWYgKGNvbnZlcnRlZFByb3BzLnJlc3BvbnNpdmVSZXNvbHV0aW9uKSB7XG4gICAgY29udmVydGVkUHJvcHMucmVzb2x1dGlvbnMgPSBjb252ZXJ0ZWRQcm9wcy5yZXNwb25zaXZlUmVzb2x1dGlvblxuICAgIGRlbGV0ZSBjb252ZXJ0ZWRQcm9wcy5yZXNwb25zaXZlUmVzb2x1dGlvblxuICB9XG4gIGlmIChjb252ZXJ0ZWRQcm9wcy5yZXNwb25zaXZlU2l6ZXMpIHtcbiAgICBjb252ZXJ0ZWRQcm9wcy5zaXplcyA9IGNvbnZlcnRlZFByb3BzLnJlc3BvbnNpdmVTaXplc1xuICAgIGRlbGV0ZSBjb252ZXJ0ZWRQcm9wcy5yZXNwb25zaXZlU2l6ZXNcbiAgfVxuXG4gIHJldHVybiBjb252ZXJ0ZWRQcm9wc1xufVxuXG4vLyBDYWNoZSBpZiB3ZSd2ZSBzZWVuIGFuIGltYWdlIGJlZm9yZSBzbyB3ZSBkb24ndCBib3RoIHdpdGhcbi8vIGxhenktbG9hZGluZyAmIGZhZGluZyBpbiBvbiBzdWJzZXF1ZW50IG1vdW50cy5cbmNvbnN0IGltYWdlQ2FjaGUgPSB7fVxuY29uc3QgaW5JbWFnZUNhY2hlID0gcHJvcHMgPT4ge1xuICBjb25zdCBjb252ZXJ0ZWRQcm9wcyA9IGNvbnZlcnRQcm9wcyhwcm9wcylcbiAgLy8gRmluZCBzcmNcbiAgY29uc3Qgc3JjID0gY29udmVydGVkUHJvcHMuc2l6ZXNcbiAgICA/IGNvbnZlcnRlZFByb3BzLnNpemVzLnNyY1xuICAgIDogY29udmVydGVkUHJvcHMucmVzb2x1dGlvbnMuc3JjXG5cbiAgaWYgKGltYWdlQ2FjaGVbc3JjXSkge1xuICAgIHJldHVybiB0cnVlXG4gIH0gZWxzZSB7XG4gICAgaW1hZ2VDYWNoZVtzcmNdID0gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbmxldCBpb1xuY29uc3QgbGlzdGVuZXJzID0gW11cblxuZnVuY3Rpb24gZ2V0SU8oKSB7XG4gIGlmIChcbiAgICB0eXBlb2YgaW8gPT09IGB1bmRlZmluZWRgICYmXG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gYHVuZGVmaW5lZGAgJiZcbiAgICB3aW5kb3cuSW50ZXJzZWN0aW9uT2JzZXJ2ZXJcbiAgKSB7XG4gICAgaW8gPSBuZXcgd2luZG93LkludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgZW50cmllcyA9PiB7XG4gICAgICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICAgICAgbGlzdGVuZXJzLmZvckVhY2gobCA9PiB7XG4gICAgICAgICAgICBpZiAobFswXSA9PT0gZW50cnkudGFyZ2V0KSB7XG4gICAgICAgICAgICAgIC8vIEVkZ2UgZG9lc24ndCBjdXJyZW50bHkgc3VwcG9ydCBpc0ludGVyc2VjdGluZywgc28gYWxzbyB0ZXN0IGZvciBhbiBpbnRlcnNlY3Rpb25SYXRpbyA+IDBcbiAgICAgICAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nIHx8IGVudHJ5LmludGVyc2VjdGlvblJhdGlvID4gMCkge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ09ic2VydmVyOiAnLCBlbnRyeSwgZW50cnkuaXNJbnRlcnNlY3RpbmcpXG4gICAgICAgICAgICAgICAgaW8udW5vYnNlcnZlKGxbMF0pXG4gICAgICAgICAgICAgICAgbFsxXSgpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIHsgcm9vdE1hcmdpbjogYDIwMHB4YCB9XG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIGlvXG59XG5cbmNvbnN0IGxpc3RlblRvSW50ZXJzZWN0aW9ucyA9IChlbCwgY2IpID0+IHtcbiAgZ2V0SU8oKS5vYnNlcnZlKGVsKVxuICBsaXN0ZW5lcnMucHVzaChbZWwsIGNiXSlcbn1cblxubGV0IGlzV2VicFN1cHBvcnRlZENhY2hlID0gbnVsbFxuY29uc3QgaXNXZWJwU3VwcG9ydGVkID0gKCkgPT4ge1xuICBpZiAoaXNXZWJwU3VwcG9ydGVkQ2FjaGUgIT09IG51bGwpIHtcbiAgICByZXR1cm4gaXNXZWJwU3VwcG9ydGVkQ2FjaGVcbiAgfVxuXG4gIGNvbnN0IGVsZW0gPVxuICAgIHR5cGVvZiB3aW5kb3cgIT09IGB1bmRlZmluZWRgID8gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYGNhbnZhc2ApIDoge31cbiAgaWYgKGVsZW0uZ2V0Q29udGV4dCAmJiBlbGVtLmdldENvbnRleHQoYDJkYCkpIHtcbiAgICBpc1dlYnBTdXBwb3J0ZWRDYWNoZSA9XG4gICAgICBlbGVtLnRvRGF0YVVSTChgaW1hZ2Uvd2VicGApLmluZGV4T2YoYGRhdGE6aW1hZ2Uvd2VicGApID09PSAwXG4gIH0gZWxzZSB7XG4gICAgaXNXZWJwU3VwcG9ydGVkQ2FjaGUgPSBmYWxzZVxuICB9XG5cbiAgcmV0dXJuIGlzV2VicFN1cHBvcnRlZENhY2hlXG59XG5cbmNvbnN0IG5vc2NyaXB0SW1nID0gcHJvcHMgPT4ge1xuICBjb25zdCB7XG4gICAgb3BhY2l0eSA9IGBgLFxuICAgIHNyYyxcbiAgICBzcmNTZXQsXG4gICAgc2l6ZXMgPSBgYCxcbiAgICB0aXRsZSA9IGBgLFxuICAgIGFsdCA9IGBgLFxuICAgIHdpZHRoID0gYGAsXG4gICAgaGVpZ2h0ID0gYGAsXG4gICAgdHJhbnNpdGlvbkRlbGF5ID0gYGAsXG4gIH0gPSBwcm9wc1xuICByZXR1cm4gYDxpbWcgd2lkdGg9JHt3aWR0aH0gaGVpZ2h0PSR7aGVpZ2h0fSBzcmM9XCIke3NyY31cIiBzcmNzZXQ9XCIke3NyY1NldH1cIiBhbHQ9XCIke2FsdH1cIiB0aXRsZT1cIiR7dGl0bGV9XCIgc2l6ZXM9XCIke3NpemVzfVwiIHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO3RyYW5zaXRpb246b3BhY2l0eSAwLjVzO3RyYW5zaXRpb24tZGVsYXk6JHt0cmFuc2l0aW9uRGVsYXl9O29wYWNpdHk6JHtvcGFjaXR5fTt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO29iamVjdC1maXQ6Y29udGFpbjtvYmplY3RQb3NpdGlvbjpjZW50ZXJcIi8+YFxufVxuXG5jb25zdCBJbWcgPSBwcm9wcyA9PiB7XG4gIGNvbnN0IHsgc3R5bGUsIG9iamVjdEZpdCwgb2JqZWN0UG9zaXRpb24sIG9wYWNpdHksIG9uTG9hZCwgdHJhbnNpdGlvbkRlbGF5ID0gYGAsIC4uLm90aGVyUHJvcHMgfSA9IHByb3BzXG5cbiAgcmV0dXJuIChcbiAgICA8aW1nXG4gICAgICBkcmFnZ2FibGU9XCJmYWxzZVwiXG4gICAgICBvbmRyYWdzdGFydD1cInJldHVybiBmYWxzZTtcIlxuICAgICAgey4uLm90aGVyUHJvcHN9XG4gICAgICBvbkxvYWQ9e29uTG9hZH1cbiAgICAgIGNzcz17e1xuICAgICAgICBwb3NpdGlvbjogYGFic29sdXRlYCxcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICB0cmFuc2l0aW9uOiBgb3BhY2l0eSAxc2AsXG4gICAgICAgIHRyYW5zaXRpb25EZWxheSxcbiAgICAgICAgb3BhY2l0eSxcbiAgICAgICAgd2lkdGg6IGAxMDAlYCxcbiAgICAgICAgaGVpZ2h0OiBgMTAwJWAsXG4gICAgICAgIG9iamVjdEZpdDogb2JqZWN0Rml0ID8gb2JqZWN0Rml0IDogYGNvbnRhaW5gLFxuICAgICAgICBvYmplY3RQb3NpdGlvbjogb2JqZWN0UG9zaXRpb24gPyBvYmplY3RQb3NpdGlvbiA6IGB0b3AgY2VudGVyYCxcbiAgICAgICAgZm9udEZhbWlseTogYCdvYmplY3QtZml0OiAke29iamVjdEZpdCA/IG9iamVjdEZpdCA6ICdjb250YWluJ307IG9iamVjdC1wb3NpdGlvbjogJHtvYmplY3RQb3NpdGlvbiA/IG9iamVjdFBvc2l0aW9uIDogJ3RvcCBjZW50ZXInfTsnYCxcbiAgICAgICAgLi4uc3R5bGVcbiAgICAgIH19XG4gICAgLz5cbiAgKVxufVxuXG5JbWcucHJvcFR5cGVzID0ge1xuICBvcGFjaXR5OiBQcm9wVHlwZXMubnVtYmVyLFxuICB0cmFuc2l0aW9uRGVsYXk6IFByb3BUeXBlcy5zdHJpbmcsXG4gIG9uTG9hZDogUHJvcFR5cGVzLmZ1bmMsXG59XG5cbmNsYXNzIEltYWdlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcblxuICAgIC8vIElmIHRoaXMgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgdGhlIEludGVyc2VjdGlvbk9ic2VydmVyIEFQSVxuICAgIC8vIHdlIGRlZmF1bHQgdG8gc3RhcnQgZG93bmxvYWRpbmcgdGhlIGltYWdlIHJpZ2h0IGF3YXkuXG4gICAgbGV0IGlzVmlzaWJsZSA9IHRydWVcbiAgICBsZXQgaW1nTG9hZGVkID0gdHJ1ZVxuICAgIGxldCBJT1N1cHBvcnRlZCA9IGZhbHNlXG5cbiAgICAvLyBJZiB0aGlzIGltYWdlIGhhcyBhbHJlYWR5IGJlZW4gbG9hZGVkIGJlZm9yZSB0aGVuIHdlIGNhbiBhc3N1bWUgaXQnc1xuICAgIC8vIGFscmVhZHkgaW4gdGhlIGJyb3dzZXIgY2FjaGUgc28gaXQncyBjaGVhcCB0byBqdXN0IHNob3cgZGlyZWN0bHkuXG4gICAgY29uc3Qgc2VlbkJlZm9yZSA9IGluSW1hZ2VDYWNoZShwcm9wcylcblxuICAgIGlmIChcbiAgICAgICFzZWVuQmVmb3JlICYmXG4gICAgICB0eXBlb2Ygd2luZG93ICE9PSBgdW5kZWZpbmVkYCAmJlxuICAgICAgd2luZG93LkludGVyc2VjdGlvbk9ic2VydmVyXG4gICAgKSB7XG4gICAgICBpc1Zpc2libGUgPSBmYWxzZVxuICAgICAgaW1nTG9hZGVkID0gZmFsc2VcbiAgICAgIElPU3VwcG9ydGVkID0gdHJ1ZVxuICAgIH1cblxuICAgIC8vIEFsd2F5cyBkb24ndCByZW5kZXIgaW1hZ2Ugd2hpbGUgc2VydmVyIHJlbmRlcmluZ1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBgdW5kZWZpbmVkYCkge1xuICAgICAgaXNWaXNpYmxlID0gZmFsc2VcbiAgICAgIGltZ0xvYWRlZCA9IGZhbHNlXG4gICAgfVxuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGlzVmlzaWJsZSxcbiAgICAgIGltZ0xvYWRlZCxcbiAgICAgIElPU3VwcG9ydGVkLFxuICAgICAgc2hvd0Jhc2U2NDogdHJ1ZVxuICAgIH1cblxuICAgIHRoaXMuaGFuZGxlUmVmID0gdGhpcy5oYW5kbGVSZWYuYmluZCh0aGlzKVxuICB9XG5cbiAgaGFuZGxlUmVmKHJlZikge1xuICAgIGlmICh0aGlzLnN0YXRlLklPU3VwcG9ydGVkICYmIHJlZikge1xuICAgICAgbGlzdGVuVG9JbnRlcnNlY3Rpb25zKHJlZiwgKCkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNWaXNpYmxlOiB0cnVlLCBpbWdMb2FkZWQ6IGZhbHNlIH0pXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7XG4gICAgICB0aXRsZSxcbiAgICAgIGFsdCxcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIG91dGVyV3JhcHBlckNsYXNzTmFtZSxcbiAgICAgIG91dGVyQ3NzID0ge30sXG4gICAgICBpbm5lckNzcyA9IHt9LFxuICAgICAgc3R5bGUgPSB7fSxcbiAgICAgIHNpemVzLFxuICAgICAgcmVzb2x1dGlvbnMsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3IsXG4gICAgICBvYmplY3RGaXQsXG4gICAgICBvYmplY3RQb3NpdGlvbixcbiAgICAgIGN1c3RvbUFzcGVjdCxcbiAgICAgIGJhc2U2NFN0eWxlXG4gICAgfSA9IGNvbnZlcnRQcm9wcyh0aGlzLnByb3BzKVxuXG5cbiAgICBsZXQgYmdDb2xvclxuICAgIGlmICh0eXBlb2YgYmFja2dyb3VuZENvbG9yID09PSBgYm9vbGVhbmApIHtcbiAgICAgIGJnQ29sb3IgPSBgbGlnaHRncmF5YFxuICAgIH0gZWxzZSB7XG4gICAgICBiZ0NvbG9yID0gYmFja2dyb3VuZENvbG9yXG4gICAgfVxuXG4gICAgaWYgKHNpemVzKSB7XG4gICAgICBjb25zdCBpbWFnZSA9IHNpemVzXG5cbiAgICAgIC8vIFVzZSB3ZWJwIGJ5IGRlZmF1bHQgaWYgYnJvd3NlciBzdXBwb3J0cyBpdFxuICAgICAgaWYgKGltYWdlLnNyY1dlYnAgJiYgaW1hZ2Uuc3JjU2V0V2VicCAmJiBpc1dlYnBTdXBwb3J0ZWQoKSkge1xuICAgICAgICBpbWFnZS5zcmMgPSBpbWFnZS5zcmNXZWJwXG4gICAgICAgIGltYWdlLnNyY1NldCA9IGltYWdlLnNyY1NldFdlYnBcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGVmYXVsdEFzcGVjdCA9IHtcbiAgICAgICAgd2lkdGg6IGAxMDAlYCxcbiAgICAgICAgcGFkZGluZ0JvdHRvbTogYCR7MTAwIC8gaW1hZ2UuYXNwZWN0UmF0aW99JWAsXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRlZmF1bHRCYXNlNjRTdHlsZSA9IHtcbiAgICAgICAgZmlsdGVyOiB0aGlzLnN0YXRlLnNob3dCYXNlNjQgPyAnYmx1cigxNXB4KScgOiAnJyxcbiAgICAgICAgdHJhbnNmb3JtOiB0aGlzLnN0YXRlLnNob3dCYXNlNjQgPyAnc2NhbGUoMS41KScgOiAnJ1xuICAgICAgfVxuICAgICAgLy8gVGhlIG91dGVyIGRpdiBpcyBuZWNlc3NhcnkgdG8gcmVzZXQgdGhlIHotaW5kZXggdG8gMC5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzc05hbWU9e2BpbWFnZS1vdXRlci13cmFwcGVyYH1cbiAgICAgICAgICBjc3M9e3tcbiAgICAgICAgICAgIHpJbmRleDogMCxcbiAgICAgICAgICAgIC8vIExldCB1c2VycyBzZXQgY29tcG9uZW50IHRvIGJlIGFic29sdXRlbHkgcG9zaXRpb25lZC5cbiAgICAgICAgICAgIHBvc2l0aW9uOiBzdHlsZS5wb3NpdGlvbiA9PT0gYGFic29sdXRlYCA/IGBpbml0aWFsYCA6IGByZWxhdGl2ZWAsXG4gICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgIH19XG4gICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgIC4uLm91dGVyQ3NzXG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzTmFtZT17YGdhdHNieS1pbWFnZS13cmFwcGVyYH1cbiAgICAgICAgICAgIGNzcz17e1xuICAgICAgICAgICAgICBwb3NpdGlvbjogYHJlbGF0aXZlYCxcbiAgICAgICAgICAgICAgb3ZlcmZsb3c6IGBoaWRkZW5gLFxuICAgICAgICAgICAgICB6SW5kZXg6IDEsXG4gICAgICAgICAgICAgIC4uLmlubmVyQ3NzLFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIHJlZj17dGhpcy5oYW5kbGVSZWZ9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgey8qIFByZXNlcnZlIHRoZSBhc3BlY3QgcmF0aW8uICovfVxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgIC4uLihjdXN0b21Bc3BlY3QgPyBjdXN0b21Bc3BlY3QgOiBkZWZhdWx0QXNwZWN0KVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgey8qIFNob3cgdGhlIGJsdXJ5IGJhc2U2NCBpbWFnZS4gdGhpcy5zdGF0ZS5zaG93QmFzZTY0ICYmICAqL31cbiAgICAgICAgICAgIHtpbWFnZS5iYXNlNjQgJiYgKFxuICAgICAgICAgICAgICA8SW1nXG4gICAgICAgICAgICAgICAgYWx0PXthbHR9XG4gICAgICAgICAgICAgICAgdGl0bGU9e3RpdGxlfVxuICAgICAgICAgICAgICAgIHNyYz17aW1hZ2UuYmFzZTY0fVxuICAgICAgICAgICAgICAgIG9wYWNpdHk9eyF0aGlzLnN0YXRlLmltZ0xvYWRlZCA/IDAuNSA6IDB9XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbkRlbGF5PXtgMC41c2B9XG4gICAgICAgICAgICAgICAgb2JqZWN0Rml0PXtvYmplY3RGaXR9XG4gICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgIC4uLihiYXNlNjRTdHlsZSA/IGJhc2U2NFN0eWxlIDogZGVmYXVsdEJhc2U2NFN0eWxlKVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7LyogU2hvdyB0aGUgdHJhY2VkIFNWRyBpbWFnZS4gKi99XG4gICAgICAgICAgICB7aW1hZ2UudHJhY2VkU1ZHICYmIChcbiAgICAgICAgICAgICAgPEltZ1xuICAgICAgICAgICAgICAgIGFsdD17YWx0fVxuICAgICAgICAgICAgICAgIHRpdGxlPXt0aXRsZX1cbiAgICAgICAgICAgICAgICBzcmM9e2ltYWdlLnRyYWNlZFNWR31cbiAgICAgICAgICAgICAgICBvcGFjaXR5PXshdGhpcy5zdGF0ZS5pbWdMb2FkZWQgPyAxIDogMH1cbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uRGVsYXk9e2AwLjI1c2B9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7LyogU2hvdyBhIHNvbGlkIGJhY2tncm91bmQgY29sb3IuICovfVxuICAgICAgICAgICAge2JnQ29sb3IgJiYgKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgdGl0bGU9e3RpdGxlfVxuICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJnQ29sb3IsXG4gICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYGFic29sdXRlYCxcbiAgICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgICAgICAgICAgIG9wYWNpdHk6ICF0aGlzLnN0YXRlLmltZ0xvYWRlZCA/IDEgOiAwLFxuICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbkRlbGF5OiBgMC4zNXNgLFxuICAgICAgICAgICAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7LyogT25jZSB0aGUgaW1hZ2UgaXMgdmlzaWJsZSAob3IgdGhlIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IEludGVyc2VjdGlvbk9ic2VydmVyKSwgc3RhcnQgZG93bmxvYWRpbmcgdGhlIGltYWdlICovfVxuICAgICAgICAgICAge3RoaXMuc3RhdGUuaXNWaXNpYmxlICYmIChcbiAgICAgICAgICAgICAgPEltZ1xuICAgICAgICAgICAgICAgIGFsdD17YWx0fVxuICAgICAgICAgICAgICAgIHRpdGxlPXt0aXRsZX1cbiAgICAgICAgICAgICAgICBzcmNTZXQ9e2ltYWdlLnNyY1NldH1cbiAgICAgICAgICAgICAgICBzcmM9e2ltYWdlLnNyY31cbiAgICAgICAgICAgICAgICBzaXplcz17aW1hZ2Uuc2l6ZXN9XG4gICAgICAgICAgICAgICAgb2JqZWN0Rml0PXtvYmplY3RGaXR9XG4gICAgICAgICAgICAgICAgb2JqZWN0UG9zaXRpb249e29iamVjdFBvc2l0aW9ufVxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb25EZWxheT17YDAuNXNgfVxuICAgICAgICAgICAgICAgIG9wYWNpdHk9e1xuICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pbWdMb2FkZWQgfHwgdGhpcy5wcm9wcy5mYWRlSW4gPT09IGZhbHNlID8gMSA6IDBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb25Mb2FkPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLklPU3VwcG9ydGVkICYmIHRoaXMuc2V0U3RhdGUoeyBpbWdMb2FkZWQ6IHRydWUgfSlcbiAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25Mb2FkICYmIHRoaXMucHJvcHMub25Mb2FkKClcbiAgICAgICAgICAgICAgICAgIC8vc2V0VGltZW91dCgoKSA9PiB0aGlzLnNldFN0YXRlKHtzaG93QmFzZTY0OiBmYWxzZX0pLCA1MDApXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIHsvKiBTaG93IHRoZSBvcmlnaW5hbCBpbWFnZSBkdXJpbmcgc2VydmVyLXNpZGUgcmVuZGVyaW5nIGlmIEphdmFTY3JpcHQgaXMgZGlzYWJsZWQgKi99XG4gICAgICAgICAgICA8bm9zY3JpcHRcbiAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tcbiAgICAgICAgICAgICAgICBfX2h0bWw6IG5vc2NyaXB0SW1nKHsgYWx0LCB0aXRsZSwgLi4uaW1hZ2UgfSksXG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAocmVzb2x1dGlvbnMpIHtcbiAgICAgIGNvbnN0IGltYWdlID0gcmVzb2x1dGlvbnNcbiAgICAgIGNvbnN0IGRpdlN0eWxlID0ge1xuICAgICAgICBwb3NpdGlvbjogYHJlbGF0aXZlYCxcbiAgICAgICAgb3ZlcmZsb3c6IGBoaWRkZW5gLFxuICAgICAgICBkaXNwbGF5OiBgaW5saW5lLWJsb2NrYCxcbiAgICAgICAgekluZGV4OiAxLFxuICAgICAgICB3aWR0aDogaW1hZ2Uud2lkdGgsXG4gICAgICAgIGhlaWdodDogaW1hZ2UuaGVpZ2h0LFxuICAgICAgICAuLi5zdHlsZSxcbiAgICAgIH1cblxuICAgICAgaWYgKHN0eWxlLmRpc3BsYXkgPT09IGBpbmhlcml0YCkge1xuICAgICAgICBkZWxldGUgZGl2U3R5bGUuZGlzcGxheVxuICAgICAgfVxuXG4gICAgICAvLyBVc2Ugd2VicCBieSBkZWZhdWx0IGlmIGJyb3dzZXIgc3VwcG9ydHMgaXRcbiAgICAgIGlmIChpbWFnZS5zcmNXZWJwICYmIGltYWdlLnNyY1NldFdlYnAgJiYgaXNXZWJwU3VwcG9ydGVkKCkpIHtcbiAgICAgICAgaW1hZ2Uuc3JjID0gaW1hZ2Uuc3JjV2VicFxuICAgICAgICBpbWFnZS5zcmNTZXQgPSBpbWFnZS5zcmNTZXRXZWJwXG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBvdXRlciBkaXYgaXMgbmVjZXNzYXJ5IHRvIHJlc2V0IHRoZSB6LWluZGV4IHRvIDAuXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3NOYW1lPXtgJHtcbiAgICAgICAgICAgIG91dGVyV3JhcHBlckNsYXNzTmFtZSA/IG91dGVyV3JhcHBlckNsYXNzTmFtZSA6IGBgXG4gICAgICAgICAgfSBnYXRzYnktaW1hZ2Utb3V0ZXItd3JhcHBlcmB9XG4gICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgIHpJbmRleDogMCxcbiAgICAgICAgICAgIC8vIExldCB1c2VycyBzZXQgY29tcG9uZW50IHRvIGJlIGFic29sdXRlbHkgcG9zaXRpb25lZC5cbiAgICAgICAgICAgIHBvc2l0aW9uOiBzdHlsZS5wb3NpdGlvbiA9PT0gYGFic29sdXRlYCA/IGBpbml0aWFsYCA6IGByZWxhdGl2ZWAsXG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7Y2xhc3NOYW1lID8gY2xhc3NOYW1lIDogYGB9IGdhdHNieS1pbWFnZS13cmFwcGVyYH1cbiAgICAgICAgICAgIHN0eWxlPXtkaXZTdHlsZX1cbiAgICAgICAgICAgIHJlZj17dGhpcy5oYW5kbGVSZWZ9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgey8qIFNob3cgdGhlIGJsdXJ5IGJhc2U2NCBpbWFnZS4gKi99XG4gICAgICAgICAgICB7aW1hZ2UuYmFzZTY0ICYmIChcbiAgICAgICAgICAgICAgPEltZ1xuICAgICAgICAgICAgICAgIGFsdD17YWx0fVxuICAgICAgICAgICAgICAgIHRpdGxlPXt0aXRsZX1cbiAgICAgICAgICAgICAgICBzcmM9e2ltYWdlLmJhc2U2NH1cbiAgICAgICAgICAgICAgICBvcGFjaXR5PXshdGhpcy5zdGF0ZS5pbWdMb2FkZWQgPyAxIDogMH1cbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uRGVsYXk9e2AwLjM1c2B9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7LyogU2hvdyB0aGUgdHJhY2VkIFNWRyBpbWFnZS4gKi99XG4gICAgICAgICAgICB7aW1hZ2UudHJhY2VkU1ZHICYmIChcbiAgICAgICAgICAgICAgPEltZ1xuICAgICAgICAgICAgICAgIGFsdD17YWx0fVxuICAgICAgICAgICAgICAgIHRpdGxlPXt0aXRsZX1cbiAgICAgICAgICAgICAgICBzcmM9e2ltYWdlLnRyYWNlZFNWR31cbiAgICAgICAgICAgICAgICBvcGFjaXR5PXshdGhpcy5zdGF0ZS5pbWdMb2FkZWQgPyAxIDogMH1cbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uRGVsYXk9e2AwLjI1c2B9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7LyogU2hvdyBhIHNvbGlkIGJhY2tncm91bmQgY29sb3IuICovfVxuICAgICAgICAgICAge2JnQ29sb3IgJiYgKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgdGl0bGU9e3RpdGxlfVxuICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJnQ29sb3IsXG4gICAgICAgICAgICAgICAgICB3aWR0aDogaW1hZ2Uud2lkdGgsXG4gICAgICAgICAgICAgICAgICBvcGFjaXR5OiAhdGhpcy5zdGF0ZS5pbWdMb2FkZWQgPyAxIDogMCxcbiAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25EZWxheTogYDAuMjVzYCxcbiAgICAgICAgICAgICAgICAgIGhlaWdodDogaW1hZ2UuaGVpZ2h0LFxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7LyogT25jZSB0aGUgaW1hZ2UgaXMgdmlzaWJsZSwgc3RhcnQgZG93bmxvYWRpbmcgdGhlIGltYWdlICovfVxuICAgICAgICAgICAge3RoaXMuc3RhdGUuaXNWaXNpYmxlICYmIChcbiAgICAgICAgICAgICAgPEltZ1xuICAgICAgICAgICAgICAgIGFsdD17YWx0fVxuICAgICAgICAgICAgICAgIHRpdGxlPXt0aXRsZX1cbiAgICAgICAgICAgICAgICB3aWR0aD17aW1hZ2Uud2lkdGh9XG4gICAgICAgICAgICAgICAgaGVpZ2h0PXtpbWFnZS5oZWlnaHR9XG4gICAgICAgICAgICAgICAgc3JjU2V0PXtpbWFnZS5zcmNTZXR9XG4gICAgICAgICAgICAgICAgc3JjPXtpbWFnZS5zcmN9XG4gICAgICAgICAgICAgICAgb3BhY2l0eT17XG4gICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmltZ0xvYWRlZCB8fCB0aGlzLnByb3BzLmZhZGVJbiA9PT0gZmFsc2UgPyAxIDogMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvbkxvYWQ9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpbWdMb2FkZWQ6IHRydWUgfSlcbiAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25Mb2FkICYmIHRoaXMucHJvcHMub25Mb2FkKClcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgey8qIFNob3cgdGhlIG9yaWdpbmFsIGltYWdlIGR1cmluZyBzZXJ2ZXItc2lkZSByZW5kZXJpbmcgaWYgSmF2YVNjcmlwdCBpcyBkaXNhYmxlZCAqL31cbiAgICAgICAgICAgIDxub3NjcmlwdFxuICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e1xuICAgICAgICAgICAgICAgIF9faHRtbDogbm9zY3JpcHRJbWcoe1xuICAgICAgICAgICAgICAgICAgYWx0LFxuICAgICAgICAgICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgICAgICAgICB3aWR0aDogaW1hZ2Uud2lkdGgsXG4gICAgICAgICAgICAgICAgICBoZWlnaHQ6IGltYWdlLmhlaWdodCxcbiAgICAgICAgICAgICAgICAgIC4uLmltYWdlLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG5JbWFnZS5kZWZhdWx0UHJvcHMgPSB7XG4gIGZhZGVJbjogdHJ1ZSxcbiAgYWx0OiBgYCxcbn1cblxuSW1hZ2UucHJvcFR5cGVzID0ge1xuICByZXNwb25zaXZlUmVzb2x1dGlvbjogUHJvcFR5cGVzLm9iamVjdCxcbiAgcmVzcG9uc2l2ZVNpemVzOiBQcm9wVHlwZXMub2JqZWN0LFxuICByZXNvbHV0aW9uczogUHJvcFR5cGVzLm9iamVjdCxcbiAgc2l6ZXM6IFByb3BUeXBlcy5vYmplY3QsXG4gIGZhZGVJbjogUHJvcFR5cGVzLmJvb2wsXG4gIHRpdGxlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBhbHQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGNsYXNzTmFtZTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZywgUHJvcFR5cGVzLm9iamVjdF0pLCAvLyBTdXBwb3J0IEdsYW1vcidzIGNzcyBwcm9wLlxuICBvdXRlcldyYXBwZXJDbGFzc05hbWU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgIFByb3BUeXBlcy5zdHJpbmcsXG4gICAgUHJvcFR5cGVzLm9iamVjdCxcbiAgXSksXG4gIHN0eWxlOiBQcm9wVHlwZXMub2JqZWN0LFxuICBwb3NpdGlvbjogUHJvcFR5cGVzLnN0cmluZyxcbiAgYmFja2dyb3VuZENvbG9yOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMuYm9vbF0pLFxuICBvbkxvYWQ6IFByb3BUeXBlcy5mdW5jLFxufVxuXG5leHBvcnQgZGVmYXVsdCBJbWFnZSJdfQ== */")),
        style: _objectSpread({}, outerCss)
      }, (0, _core.jsx)("div", {
        className: `gatsby-image-wrapper`,
        css:
        /*#__PURE__*/
        (0, _css2.default)(_objectSpread({
          position: `relative`,
          overflow: `hidden`,
          zIndex: 1
        }, innerCss), "label:Image;" + (process.env.NODE_ENV === "production" ? "" : "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL0ltYWdlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXdQWSIsImZpbGUiOiIuLi8uLi8uLi9zcmMvY29tcG9uZW50cy9JbWFnZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCJcbmltcG9ydCB7anN4fSBmcm9tICdAZW1vdGlvbi9jb3JlJ1xuXG4vLyBIYW5kbGUgbGVnYWN5IG5hbWVzIGZvciBpbWFnZSBxdWVyaWVzLlxuY29uc3QgY29udmVydFByb3BzID0gcHJvcHMgPT4ge1xuICBsZXQgY29udmVydGVkUHJvcHMgPSB7IC4uLnByb3BzIH1cbiAgaWYgKGNvbnZlcnRlZFByb3BzLnJlc3BvbnNpdmVSZXNvbHV0aW9uKSB7XG4gICAgY29udmVydGVkUHJvcHMucmVzb2x1dGlvbnMgPSBjb252ZXJ0ZWRQcm9wcy5yZXNwb25zaXZlUmVzb2x1dGlvblxuICAgIGRlbGV0ZSBjb252ZXJ0ZWRQcm9wcy5yZXNwb25zaXZlUmVzb2x1dGlvblxuICB9XG4gIGlmIChjb252ZXJ0ZWRQcm9wcy5yZXNwb25zaXZlU2l6ZXMpIHtcbiAgICBjb252ZXJ0ZWRQcm9wcy5zaXplcyA9IGNvbnZlcnRlZFByb3BzLnJlc3BvbnNpdmVTaXplc1xuICAgIGRlbGV0ZSBjb252ZXJ0ZWRQcm9wcy5yZXNwb25zaXZlU2l6ZXNcbiAgfVxuXG4gIHJldHVybiBjb252ZXJ0ZWRQcm9wc1xufVxuXG4vLyBDYWNoZSBpZiB3ZSd2ZSBzZWVuIGFuIGltYWdlIGJlZm9yZSBzbyB3ZSBkb24ndCBib3RoIHdpdGhcbi8vIGxhenktbG9hZGluZyAmIGZhZGluZyBpbiBvbiBzdWJzZXF1ZW50IG1vdW50cy5cbmNvbnN0IGltYWdlQ2FjaGUgPSB7fVxuY29uc3QgaW5JbWFnZUNhY2hlID0gcHJvcHMgPT4ge1xuICBjb25zdCBjb252ZXJ0ZWRQcm9wcyA9IGNvbnZlcnRQcm9wcyhwcm9wcylcbiAgLy8gRmluZCBzcmNcbiAgY29uc3Qgc3JjID0gY29udmVydGVkUHJvcHMuc2l6ZXNcbiAgICA/IGNvbnZlcnRlZFByb3BzLnNpemVzLnNyY1xuICAgIDogY29udmVydGVkUHJvcHMucmVzb2x1dGlvbnMuc3JjXG5cbiAgaWYgKGltYWdlQ2FjaGVbc3JjXSkge1xuICAgIHJldHVybiB0cnVlXG4gIH0gZWxzZSB7XG4gICAgaW1hZ2VDYWNoZVtzcmNdID0gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbmxldCBpb1xuY29uc3QgbGlzdGVuZXJzID0gW11cblxuZnVuY3Rpb24gZ2V0SU8oKSB7XG4gIGlmIChcbiAgICB0eXBlb2YgaW8gPT09IGB1bmRlZmluZWRgICYmXG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gYHVuZGVmaW5lZGAgJiZcbiAgICB3aW5kb3cuSW50ZXJzZWN0aW9uT2JzZXJ2ZXJcbiAgKSB7XG4gICAgaW8gPSBuZXcgd2luZG93LkludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgZW50cmllcyA9PiB7XG4gICAgICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICAgICAgbGlzdGVuZXJzLmZvckVhY2gobCA9PiB7XG4gICAgICAgICAgICBpZiAobFswXSA9PT0gZW50cnkudGFyZ2V0KSB7XG4gICAgICAgICAgICAgIC8vIEVkZ2UgZG9lc24ndCBjdXJyZW50bHkgc3VwcG9ydCBpc0ludGVyc2VjdGluZywgc28gYWxzbyB0ZXN0IGZvciBhbiBpbnRlcnNlY3Rpb25SYXRpbyA+IDBcbiAgICAgICAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nIHx8IGVudHJ5LmludGVyc2VjdGlvblJhdGlvID4gMCkge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ09ic2VydmVyOiAnLCBlbnRyeSwgZW50cnkuaXNJbnRlcnNlY3RpbmcpXG4gICAgICAgICAgICAgICAgaW8udW5vYnNlcnZlKGxbMF0pXG4gICAgICAgICAgICAgICAgbFsxXSgpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIHsgcm9vdE1hcmdpbjogYDIwMHB4YCB9XG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIGlvXG59XG5cbmNvbnN0IGxpc3RlblRvSW50ZXJzZWN0aW9ucyA9IChlbCwgY2IpID0+IHtcbiAgZ2V0SU8oKS5vYnNlcnZlKGVsKVxuICBsaXN0ZW5lcnMucHVzaChbZWwsIGNiXSlcbn1cblxubGV0IGlzV2VicFN1cHBvcnRlZENhY2hlID0gbnVsbFxuY29uc3QgaXNXZWJwU3VwcG9ydGVkID0gKCkgPT4ge1xuICBpZiAoaXNXZWJwU3VwcG9ydGVkQ2FjaGUgIT09IG51bGwpIHtcbiAgICByZXR1cm4gaXNXZWJwU3VwcG9ydGVkQ2FjaGVcbiAgfVxuXG4gIGNvbnN0IGVsZW0gPVxuICAgIHR5cGVvZiB3aW5kb3cgIT09IGB1bmRlZmluZWRgID8gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYGNhbnZhc2ApIDoge31cbiAgaWYgKGVsZW0uZ2V0Q29udGV4dCAmJiBlbGVtLmdldENvbnRleHQoYDJkYCkpIHtcbiAgICBpc1dlYnBTdXBwb3J0ZWRDYWNoZSA9XG4gICAgICBlbGVtLnRvRGF0YVVSTChgaW1hZ2Uvd2VicGApLmluZGV4T2YoYGRhdGE6aW1hZ2Uvd2VicGApID09PSAwXG4gIH0gZWxzZSB7XG4gICAgaXNXZWJwU3VwcG9ydGVkQ2FjaGUgPSBmYWxzZVxuICB9XG5cbiAgcmV0dXJuIGlzV2VicFN1cHBvcnRlZENhY2hlXG59XG5cbmNvbnN0IG5vc2NyaXB0SW1nID0gcHJvcHMgPT4ge1xuICBjb25zdCB7XG4gICAgb3BhY2l0eSA9IGBgLFxuICAgIHNyYyxcbiAgICBzcmNTZXQsXG4gICAgc2l6ZXMgPSBgYCxcbiAgICB0aXRsZSA9IGBgLFxuICAgIGFsdCA9IGBgLFxuICAgIHdpZHRoID0gYGAsXG4gICAgaGVpZ2h0ID0gYGAsXG4gICAgdHJhbnNpdGlvbkRlbGF5ID0gYGAsXG4gIH0gPSBwcm9wc1xuICByZXR1cm4gYDxpbWcgd2lkdGg9JHt3aWR0aH0gaGVpZ2h0PSR7aGVpZ2h0fSBzcmM9XCIke3NyY31cIiBzcmNzZXQ9XCIke3NyY1NldH1cIiBhbHQ9XCIke2FsdH1cIiB0aXRsZT1cIiR7dGl0bGV9XCIgc2l6ZXM9XCIke3NpemVzfVwiIHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO3RyYW5zaXRpb246b3BhY2l0eSAwLjVzO3RyYW5zaXRpb24tZGVsYXk6JHt0cmFuc2l0aW9uRGVsYXl9O29wYWNpdHk6JHtvcGFjaXR5fTt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO29iamVjdC1maXQ6Y29udGFpbjtvYmplY3RQb3NpdGlvbjpjZW50ZXJcIi8+YFxufVxuXG5jb25zdCBJbWcgPSBwcm9wcyA9PiB7XG4gIGNvbnN0IHsgc3R5bGUsIG9iamVjdEZpdCwgb2JqZWN0UG9zaXRpb24sIG9wYWNpdHksIG9uTG9hZCwgdHJhbnNpdGlvbkRlbGF5ID0gYGAsIC4uLm90aGVyUHJvcHMgfSA9IHByb3BzXG5cbiAgcmV0dXJuIChcbiAgICA8aW1nXG4gICAgICBkcmFnZ2FibGU9XCJmYWxzZVwiXG4gICAgICBvbmRyYWdzdGFydD1cInJldHVybiBmYWxzZTtcIlxuICAgICAgey4uLm90aGVyUHJvcHN9XG4gICAgICBvbkxvYWQ9e29uTG9hZH1cbiAgICAgIGNzcz17e1xuICAgICAgICBwb3NpdGlvbjogYGFic29sdXRlYCxcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICB0cmFuc2l0aW9uOiBgb3BhY2l0eSAxc2AsXG4gICAgICAgIHRyYW5zaXRpb25EZWxheSxcbiAgICAgICAgb3BhY2l0eSxcbiAgICAgICAgd2lkdGg6IGAxMDAlYCxcbiAgICAgICAgaGVpZ2h0OiBgMTAwJWAsXG4gICAgICAgIG9iamVjdEZpdDogb2JqZWN0Rml0ID8gb2JqZWN0Rml0IDogYGNvbnRhaW5gLFxuICAgICAgICBvYmplY3RQb3NpdGlvbjogb2JqZWN0UG9zaXRpb24gPyBvYmplY3RQb3NpdGlvbiA6IGB0b3AgY2VudGVyYCxcbiAgICAgICAgZm9udEZhbWlseTogYCdvYmplY3QtZml0OiAke29iamVjdEZpdCA/IG9iamVjdEZpdCA6ICdjb250YWluJ307IG9iamVjdC1wb3NpdGlvbjogJHtvYmplY3RQb3NpdGlvbiA/IG9iamVjdFBvc2l0aW9uIDogJ3RvcCBjZW50ZXInfTsnYCxcbiAgICAgICAgLi4uc3R5bGVcbiAgICAgIH19XG4gICAgLz5cbiAgKVxufVxuXG5JbWcucHJvcFR5cGVzID0ge1xuICBvcGFjaXR5OiBQcm9wVHlwZXMubnVtYmVyLFxuICB0cmFuc2l0aW9uRGVsYXk6IFByb3BUeXBlcy5zdHJpbmcsXG4gIG9uTG9hZDogUHJvcFR5cGVzLmZ1bmMsXG59XG5cbmNsYXNzIEltYWdlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcblxuICAgIC8vIElmIHRoaXMgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgdGhlIEludGVyc2VjdGlvbk9ic2VydmVyIEFQSVxuICAgIC8vIHdlIGRlZmF1bHQgdG8gc3RhcnQgZG93bmxvYWRpbmcgdGhlIGltYWdlIHJpZ2h0IGF3YXkuXG4gICAgbGV0IGlzVmlzaWJsZSA9IHRydWVcbiAgICBsZXQgaW1nTG9hZGVkID0gdHJ1ZVxuICAgIGxldCBJT1N1cHBvcnRlZCA9IGZhbHNlXG5cbiAgICAvLyBJZiB0aGlzIGltYWdlIGhhcyBhbHJlYWR5IGJlZW4gbG9hZGVkIGJlZm9yZSB0aGVuIHdlIGNhbiBhc3N1bWUgaXQnc1xuICAgIC8vIGFscmVhZHkgaW4gdGhlIGJyb3dzZXIgY2FjaGUgc28gaXQncyBjaGVhcCB0byBqdXN0IHNob3cgZGlyZWN0bHkuXG4gICAgY29uc3Qgc2VlbkJlZm9yZSA9IGluSW1hZ2VDYWNoZShwcm9wcylcblxuICAgIGlmIChcbiAgICAgICFzZWVuQmVmb3JlICYmXG4gICAgICB0eXBlb2Ygd2luZG93ICE9PSBgdW5kZWZpbmVkYCAmJlxuICAgICAgd2luZG93LkludGVyc2VjdGlvbk9ic2VydmVyXG4gICAgKSB7XG4gICAgICBpc1Zpc2libGUgPSBmYWxzZVxuICAgICAgaW1nTG9hZGVkID0gZmFsc2VcbiAgICAgIElPU3VwcG9ydGVkID0gdHJ1ZVxuICAgIH1cblxuICAgIC8vIEFsd2F5cyBkb24ndCByZW5kZXIgaW1hZ2Ugd2hpbGUgc2VydmVyIHJlbmRlcmluZ1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBgdW5kZWZpbmVkYCkge1xuICAgICAgaXNWaXNpYmxlID0gZmFsc2VcbiAgICAgIGltZ0xvYWRlZCA9IGZhbHNlXG4gICAgfVxuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGlzVmlzaWJsZSxcbiAgICAgIGltZ0xvYWRlZCxcbiAgICAgIElPU3VwcG9ydGVkLFxuICAgICAgc2hvd0Jhc2U2NDogdHJ1ZVxuICAgIH1cblxuICAgIHRoaXMuaGFuZGxlUmVmID0gdGhpcy5oYW5kbGVSZWYuYmluZCh0aGlzKVxuICB9XG5cbiAgaGFuZGxlUmVmKHJlZikge1xuICAgIGlmICh0aGlzLnN0YXRlLklPU3VwcG9ydGVkICYmIHJlZikge1xuICAgICAgbGlzdGVuVG9JbnRlcnNlY3Rpb25zKHJlZiwgKCkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNWaXNpYmxlOiB0cnVlLCBpbWdMb2FkZWQ6IGZhbHNlIH0pXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7XG4gICAgICB0aXRsZSxcbiAgICAgIGFsdCxcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIG91dGVyV3JhcHBlckNsYXNzTmFtZSxcbiAgICAgIG91dGVyQ3NzID0ge30sXG4gICAgICBpbm5lckNzcyA9IHt9LFxuICAgICAgc3R5bGUgPSB7fSxcbiAgICAgIHNpemVzLFxuICAgICAgcmVzb2x1dGlvbnMsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3IsXG4gICAgICBvYmplY3RGaXQsXG4gICAgICBvYmplY3RQb3NpdGlvbixcbiAgICAgIGN1c3RvbUFzcGVjdCxcbiAgICAgIGJhc2U2NFN0eWxlXG4gICAgfSA9IGNvbnZlcnRQcm9wcyh0aGlzLnByb3BzKVxuXG5cbiAgICBsZXQgYmdDb2xvclxuICAgIGlmICh0eXBlb2YgYmFja2dyb3VuZENvbG9yID09PSBgYm9vbGVhbmApIHtcbiAgICAgIGJnQ29sb3IgPSBgbGlnaHRncmF5YFxuICAgIH0gZWxzZSB7XG4gICAgICBiZ0NvbG9yID0gYmFja2dyb3VuZENvbG9yXG4gICAgfVxuXG4gICAgaWYgKHNpemVzKSB7XG4gICAgICBjb25zdCBpbWFnZSA9IHNpemVzXG5cbiAgICAgIC8vIFVzZSB3ZWJwIGJ5IGRlZmF1bHQgaWYgYnJvd3NlciBzdXBwb3J0cyBpdFxuICAgICAgaWYgKGltYWdlLnNyY1dlYnAgJiYgaW1hZ2Uuc3JjU2V0V2VicCAmJiBpc1dlYnBTdXBwb3J0ZWQoKSkge1xuICAgICAgICBpbWFnZS5zcmMgPSBpbWFnZS5zcmNXZWJwXG4gICAgICAgIGltYWdlLnNyY1NldCA9IGltYWdlLnNyY1NldFdlYnBcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGVmYXVsdEFzcGVjdCA9IHtcbiAgICAgICAgd2lkdGg6IGAxMDAlYCxcbiAgICAgICAgcGFkZGluZ0JvdHRvbTogYCR7MTAwIC8gaW1hZ2UuYXNwZWN0UmF0aW99JWAsXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRlZmF1bHRCYXNlNjRTdHlsZSA9IHtcbiAgICAgICAgZmlsdGVyOiB0aGlzLnN0YXRlLnNob3dCYXNlNjQgPyAnYmx1cigxNXB4KScgOiAnJyxcbiAgICAgICAgdHJhbnNmb3JtOiB0aGlzLnN0YXRlLnNob3dCYXNlNjQgPyAnc2NhbGUoMS41KScgOiAnJ1xuICAgICAgfVxuICAgICAgLy8gVGhlIG91dGVyIGRpdiBpcyBuZWNlc3NhcnkgdG8gcmVzZXQgdGhlIHotaW5kZXggdG8gMC5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzc05hbWU9e2BpbWFnZS1vdXRlci13cmFwcGVyYH1cbiAgICAgICAgICBjc3M9e3tcbiAgICAgICAgICAgIHpJbmRleDogMCxcbiAgICAgICAgICAgIC8vIExldCB1c2VycyBzZXQgY29tcG9uZW50IHRvIGJlIGFic29sdXRlbHkgcG9zaXRpb25lZC5cbiAgICAgICAgICAgIHBvc2l0aW9uOiBzdHlsZS5wb3NpdGlvbiA9PT0gYGFic29sdXRlYCA/IGBpbml0aWFsYCA6IGByZWxhdGl2ZWAsXG4gICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgIH19XG4gICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgIC4uLm91dGVyQ3NzXG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzTmFtZT17YGdhdHNieS1pbWFnZS13cmFwcGVyYH1cbiAgICAgICAgICAgIGNzcz17e1xuICAgICAgICAgICAgICBwb3NpdGlvbjogYHJlbGF0aXZlYCxcbiAgICAgICAgICAgICAgb3ZlcmZsb3c6IGBoaWRkZW5gLFxuICAgICAgICAgICAgICB6SW5kZXg6IDEsXG4gICAgICAgICAgICAgIC4uLmlubmVyQ3NzLFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIHJlZj17dGhpcy5oYW5kbGVSZWZ9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgey8qIFByZXNlcnZlIHRoZSBhc3BlY3QgcmF0aW8uICovfVxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgIC4uLihjdXN0b21Bc3BlY3QgPyBjdXN0b21Bc3BlY3QgOiBkZWZhdWx0QXNwZWN0KVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgey8qIFNob3cgdGhlIGJsdXJ5IGJhc2U2NCBpbWFnZS4gdGhpcy5zdGF0ZS5zaG93QmFzZTY0ICYmICAqL31cbiAgICAgICAgICAgIHtpbWFnZS5iYXNlNjQgJiYgKFxuICAgICAgICAgICAgICA8SW1nXG4gICAgICAgICAgICAgICAgYWx0PXthbHR9XG4gICAgICAgICAgICAgICAgdGl0bGU9e3RpdGxlfVxuICAgICAgICAgICAgICAgIHNyYz17aW1hZ2UuYmFzZTY0fVxuICAgICAgICAgICAgICAgIG9wYWNpdHk9eyF0aGlzLnN0YXRlLmltZ0xvYWRlZCA/IDAuNSA6IDB9XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbkRlbGF5PXtgMC41c2B9XG4gICAgICAgICAgICAgICAgb2JqZWN0Rml0PXtvYmplY3RGaXR9XG4gICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgIC4uLihiYXNlNjRTdHlsZSA/IGJhc2U2NFN0eWxlIDogZGVmYXVsdEJhc2U2NFN0eWxlKVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7LyogU2hvdyB0aGUgdHJhY2VkIFNWRyBpbWFnZS4gKi99XG4gICAgICAgICAgICB7aW1hZ2UudHJhY2VkU1ZHICYmIChcbiAgICAgICAgICAgICAgPEltZ1xuICAgICAgICAgICAgICAgIGFsdD17YWx0fVxuICAgICAgICAgICAgICAgIHRpdGxlPXt0aXRsZX1cbiAgICAgICAgICAgICAgICBzcmM9e2ltYWdlLnRyYWNlZFNWR31cbiAgICAgICAgICAgICAgICBvcGFjaXR5PXshdGhpcy5zdGF0ZS5pbWdMb2FkZWQgPyAxIDogMH1cbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uRGVsYXk9e2AwLjI1c2B9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7LyogU2hvdyBhIHNvbGlkIGJhY2tncm91bmQgY29sb3IuICovfVxuICAgICAgICAgICAge2JnQ29sb3IgJiYgKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgdGl0bGU9e3RpdGxlfVxuICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJnQ29sb3IsXG4gICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYGFic29sdXRlYCxcbiAgICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgICAgICAgICAgIG9wYWNpdHk6ICF0aGlzLnN0YXRlLmltZ0xvYWRlZCA/IDEgOiAwLFxuICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbkRlbGF5OiBgMC4zNXNgLFxuICAgICAgICAgICAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7LyogT25jZSB0aGUgaW1hZ2UgaXMgdmlzaWJsZSAob3IgdGhlIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IEludGVyc2VjdGlvbk9ic2VydmVyKSwgc3RhcnQgZG93bmxvYWRpbmcgdGhlIGltYWdlICovfVxuICAgICAgICAgICAge3RoaXMuc3RhdGUuaXNWaXNpYmxlICYmIChcbiAgICAgICAgICAgICAgPEltZ1xuICAgICAgICAgICAgICAgIGFsdD17YWx0fVxuICAgICAgICAgICAgICAgIHRpdGxlPXt0aXRsZX1cbiAgICAgICAgICAgICAgICBzcmNTZXQ9e2ltYWdlLnNyY1NldH1cbiAgICAgICAgICAgICAgICBzcmM9e2ltYWdlLnNyY31cbiAgICAgICAgICAgICAgICBzaXplcz17aW1hZ2Uuc2l6ZXN9XG4gICAgICAgICAgICAgICAgb2JqZWN0Rml0PXtvYmplY3RGaXR9XG4gICAgICAgICAgICAgICAgb2JqZWN0UG9zaXRpb249e29iamVjdFBvc2l0aW9ufVxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb25EZWxheT17YDAuNXNgfVxuICAgICAgICAgICAgICAgIG9wYWNpdHk9e1xuICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pbWdMb2FkZWQgfHwgdGhpcy5wcm9wcy5mYWRlSW4gPT09IGZhbHNlID8gMSA6IDBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb25Mb2FkPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLklPU3VwcG9ydGVkICYmIHRoaXMuc2V0U3RhdGUoeyBpbWdMb2FkZWQ6IHRydWUgfSlcbiAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25Mb2FkICYmIHRoaXMucHJvcHMub25Mb2FkKClcbiAgICAgICAgICAgICAgICAgIC8vc2V0VGltZW91dCgoKSA9PiB0aGlzLnNldFN0YXRlKHtzaG93QmFzZTY0OiBmYWxzZX0pLCA1MDApXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIHsvKiBTaG93IHRoZSBvcmlnaW5hbCBpbWFnZSBkdXJpbmcgc2VydmVyLXNpZGUgcmVuZGVyaW5nIGlmIEphdmFTY3JpcHQgaXMgZGlzYWJsZWQgKi99XG4gICAgICAgICAgICA8bm9zY3JpcHRcbiAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tcbiAgICAgICAgICAgICAgICBfX2h0bWw6IG5vc2NyaXB0SW1nKHsgYWx0LCB0aXRsZSwgLi4uaW1hZ2UgfSksXG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAocmVzb2x1dGlvbnMpIHtcbiAgICAgIGNvbnN0IGltYWdlID0gcmVzb2x1dGlvbnNcbiAgICAgIGNvbnN0IGRpdlN0eWxlID0ge1xuICAgICAgICBwb3NpdGlvbjogYHJlbGF0aXZlYCxcbiAgICAgICAgb3ZlcmZsb3c6IGBoaWRkZW5gLFxuICAgICAgICBkaXNwbGF5OiBgaW5saW5lLWJsb2NrYCxcbiAgICAgICAgekluZGV4OiAxLFxuICAgICAgICB3aWR0aDogaW1hZ2Uud2lkdGgsXG4gICAgICAgIGhlaWdodDogaW1hZ2UuaGVpZ2h0LFxuICAgICAgICAuLi5zdHlsZSxcbiAgICAgIH1cblxuICAgICAgaWYgKHN0eWxlLmRpc3BsYXkgPT09IGBpbmhlcml0YCkge1xuICAgICAgICBkZWxldGUgZGl2U3R5bGUuZGlzcGxheVxuICAgICAgfVxuXG4gICAgICAvLyBVc2Ugd2VicCBieSBkZWZhdWx0IGlmIGJyb3dzZXIgc3VwcG9ydHMgaXRcbiAgICAgIGlmIChpbWFnZS5zcmNXZWJwICYmIGltYWdlLnNyY1NldFdlYnAgJiYgaXNXZWJwU3VwcG9ydGVkKCkpIHtcbiAgICAgICAgaW1hZ2Uuc3JjID0gaW1hZ2Uuc3JjV2VicFxuICAgICAgICBpbWFnZS5zcmNTZXQgPSBpbWFnZS5zcmNTZXRXZWJwXG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBvdXRlciBkaXYgaXMgbmVjZXNzYXJ5IHRvIHJlc2V0IHRoZSB6LWluZGV4IHRvIDAuXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3NOYW1lPXtgJHtcbiAgICAgICAgICAgIG91dGVyV3JhcHBlckNsYXNzTmFtZSA/IG91dGVyV3JhcHBlckNsYXNzTmFtZSA6IGBgXG4gICAgICAgICAgfSBnYXRzYnktaW1hZ2Utb3V0ZXItd3JhcHBlcmB9XG4gICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgIHpJbmRleDogMCxcbiAgICAgICAgICAgIC8vIExldCB1c2VycyBzZXQgY29tcG9uZW50IHRvIGJlIGFic29sdXRlbHkgcG9zaXRpb25lZC5cbiAgICAgICAgICAgIHBvc2l0aW9uOiBzdHlsZS5wb3NpdGlvbiA9PT0gYGFic29sdXRlYCA/IGBpbml0aWFsYCA6IGByZWxhdGl2ZWAsXG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7Y2xhc3NOYW1lID8gY2xhc3NOYW1lIDogYGB9IGdhdHNieS1pbWFnZS13cmFwcGVyYH1cbiAgICAgICAgICAgIHN0eWxlPXtkaXZTdHlsZX1cbiAgICAgICAgICAgIHJlZj17dGhpcy5oYW5kbGVSZWZ9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgey8qIFNob3cgdGhlIGJsdXJ5IGJhc2U2NCBpbWFnZS4gKi99XG4gICAgICAgICAgICB7aW1hZ2UuYmFzZTY0ICYmIChcbiAgICAgICAgICAgICAgPEltZ1xuICAgICAgICAgICAgICAgIGFsdD17YWx0fVxuICAgICAgICAgICAgICAgIHRpdGxlPXt0aXRsZX1cbiAgICAgICAgICAgICAgICBzcmM9e2ltYWdlLmJhc2U2NH1cbiAgICAgICAgICAgICAgICBvcGFjaXR5PXshdGhpcy5zdGF0ZS5pbWdMb2FkZWQgPyAxIDogMH1cbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uRGVsYXk9e2AwLjM1c2B9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7LyogU2hvdyB0aGUgdHJhY2VkIFNWRyBpbWFnZS4gKi99XG4gICAgICAgICAgICB7aW1hZ2UudHJhY2VkU1ZHICYmIChcbiAgICAgICAgICAgICAgPEltZ1xuICAgICAgICAgICAgICAgIGFsdD17YWx0fVxuICAgICAgICAgICAgICAgIHRpdGxlPXt0aXRsZX1cbiAgICAgICAgICAgICAgICBzcmM9e2ltYWdlLnRyYWNlZFNWR31cbiAgICAgICAgICAgICAgICBvcGFjaXR5PXshdGhpcy5zdGF0ZS5pbWdMb2FkZWQgPyAxIDogMH1cbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uRGVsYXk9e2AwLjI1c2B9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7LyogU2hvdyBhIHNvbGlkIGJhY2tncm91bmQgY29sb3IuICovfVxuICAgICAgICAgICAge2JnQ29sb3IgJiYgKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgdGl0bGU9e3RpdGxlfVxuICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJnQ29sb3IsXG4gICAgICAgICAgICAgICAgICB3aWR0aDogaW1hZ2Uud2lkdGgsXG4gICAgICAgICAgICAgICAgICBvcGFjaXR5OiAhdGhpcy5zdGF0ZS5pbWdMb2FkZWQgPyAxIDogMCxcbiAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25EZWxheTogYDAuMjVzYCxcbiAgICAgICAgICAgICAgICAgIGhlaWdodDogaW1hZ2UuaGVpZ2h0LFxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7LyogT25jZSB0aGUgaW1hZ2UgaXMgdmlzaWJsZSwgc3RhcnQgZG93bmxvYWRpbmcgdGhlIGltYWdlICovfVxuICAgICAgICAgICAge3RoaXMuc3RhdGUuaXNWaXNpYmxlICYmIChcbiAgICAgICAgICAgICAgPEltZ1xuICAgICAgICAgICAgICAgIGFsdD17YWx0fVxuICAgICAgICAgICAgICAgIHRpdGxlPXt0aXRsZX1cbiAgICAgICAgICAgICAgICB3aWR0aD17aW1hZ2Uud2lkdGh9XG4gICAgICAgICAgICAgICAgaGVpZ2h0PXtpbWFnZS5oZWlnaHR9XG4gICAgICAgICAgICAgICAgc3JjU2V0PXtpbWFnZS5zcmNTZXR9XG4gICAgICAgICAgICAgICAgc3JjPXtpbWFnZS5zcmN9XG4gICAgICAgICAgICAgICAgb3BhY2l0eT17XG4gICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmltZ0xvYWRlZCB8fCB0aGlzLnByb3BzLmZhZGVJbiA9PT0gZmFsc2UgPyAxIDogMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvbkxvYWQ9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpbWdMb2FkZWQ6IHRydWUgfSlcbiAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25Mb2FkICYmIHRoaXMucHJvcHMub25Mb2FkKClcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgey8qIFNob3cgdGhlIG9yaWdpbmFsIGltYWdlIGR1cmluZyBzZXJ2ZXItc2lkZSByZW5kZXJpbmcgaWYgSmF2YVNjcmlwdCBpcyBkaXNhYmxlZCAqL31cbiAgICAgICAgICAgIDxub3NjcmlwdFxuICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e1xuICAgICAgICAgICAgICAgIF9faHRtbDogbm9zY3JpcHRJbWcoe1xuICAgICAgICAgICAgICAgICAgYWx0LFxuICAgICAgICAgICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgICAgICAgICB3aWR0aDogaW1hZ2Uud2lkdGgsXG4gICAgICAgICAgICAgICAgICBoZWlnaHQ6IGltYWdlLmhlaWdodCxcbiAgICAgICAgICAgICAgICAgIC4uLmltYWdlLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG5JbWFnZS5kZWZhdWx0UHJvcHMgPSB7XG4gIGZhZGVJbjogdHJ1ZSxcbiAgYWx0OiBgYCxcbn1cblxuSW1hZ2UucHJvcFR5cGVzID0ge1xuICByZXNwb25zaXZlUmVzb2x1dGlvbjogUHJvcFR5cGVzLm9iamVjdCxcbiAgcmVzcG9uc2l2ZVNpemVzOiBQcm9wVHlwZXMub2JqZWN0LFxuICByZXNvbHV0aW9uczogUHJvcFR5cGVzLm9iamVjdCxcbiAgc2l6ZXM6IFByb3BUeXBlcy5vYmplY3QsXG4gIGZhZGVJbjogUHJvcFR5cGVzLmJvb2wsXG4gIHRpdGxlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBhbHQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGNsYXNzTmFtZTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZywgUHJvcFR5cGVzLm9iamVjdF0pLCAvLyBTdXBwb3J0IEdsYW1vcidzIGNzcyBwcm9wLlxuICBvdXRlcldyYXBwZXJDbGFzc05hbWU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgIFByb3BUeXBlcy5zdHJpbmcsXG4gICAgUHJvcFR5cGVzLm9iamVjdCxcbiAgXSksXG4gIHN0eWxlOiBQcm9wVHlwZXMub2JqZWN0LFxuICBwb3NpdGlvbjogUHJvcFR5cGVzLnN0cmluZyxcbiAgYmFja2dyb3VuZENvbG9yOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMuYm9vbF0pLFxuICBvbkxvYWQ6IFByb3BUeXBlcy5mdW5jLFxufVxuXG5leHBvcnQgZGVmYXVsdCBJbWFnZSJdfQ== */")),
        ref: this.handleRef
      }, (0, _core.jsx)("div", {
        style: _objectSpread({}, customAspect ? customAspect : defaultAspect)
      }), image.base64 && (0, _core.jsx)(Img, {
        alt: alt,
        title: title,
        src: image.base64,
        opacity: !this.state.imgLoaded ? 0.5 : 0,
        transitionDelay: `0.5s`,
        objectFit: objectFit,
        style: _objectSpread({}, base64Style ? base64Style : defaultBase64Style)
      }), image.tracedSVG && (0, _core.jsx)(Img, {
        alt: alt,
        title: title,
        src: image.tracedSVG,
        opacity: !this.state.imgLoaded ? 1 : 0,
        transitionDelay: `0.25s`
      }), bgColor && (0, _core.jsx)("div", {
        title: title,
        style: {
          backgroundColor: bgColor,
          position: `absolute`,
          top: 0,
          bottom: 0,
          opacity: !this.state.imgLoaded ? 1 : 0,
          transitionDelay: `0.35s`,
          right: 0,
          left: 0
        }
      }), this.state.isVisible && (0, _core.jsx)(Img, {
        alt: alt,
        title: title,
        srcSet: image.srcSet,
        src: image.src,
        sizes: image.sizes,
        objectFit: objectFit,
        objectPosition: objectPosition,
        transitionDelay: `0.5s`,
        opacity: this.state.imgLoaded || this.props.fadeIn === false ? 1 : 0,
        onLoad: () => {
          this.state.IOSupported && this.setState({
            imgLoaded: true
          });
          this.props.onLoad && this.props.onLoad(); //setTimeout(() => this.setState({showBase64: false}), 500)
        }
      }), (0, _core.jsx)("noscript", {
        dangerouslySetInnerHTML: {
          __html: noscriptImg(_objectSpread({
            alt,
            title
          }, image))
        }
      })));
    }

    if (resolutions) {
      const image = resolutions;

      const divStyle = _objectSpread({
        position: `relative`,
        overflow: `hidden`,
        display: `inline-block`,
        zIndex: 1,
        width: image.width,
        height: image.height
      }, style);

      if (style.display === `inherit`) {
        delete divStyle.display;
      } // Use webp by default if browser supports it


      if (image.srcWebp && image.srcSetWebp && isWebpSupported()) {
        image.src = image.srcWebp;
        image.srcSet = image.srcSetWebp;
      } // The outer div is necessary to reset the z-index to 0.


      return (0, _core.jsx)("div", {
        className: `${outerWrapperClassName ? outerWrapperClassName : ``} gatsby-image-outer-wrapper`,
        style: {
          zIndex: 0,
          // Let users set component to be absolutely positioned.
          position: style.position === `absolute` ? `initial` : `relative`
        }
      }, (0, _core.jsx)("div", {
        className: `${className ? className : ``} gatsby-image-wrapper`,
        style: divStyle,
        ref: this.handleRef
      }, image.base64 && (0, _core.jsx)(Img, {
        alt: alt,
        title: title,
        src: image.base64,
        opacity: !this.state.imgLoaded ? 1 : 0,
        transitionDelay: `0.35s`
      }), image.tracedSVG && (0, _core.jsx)(Img, {
        alt: alt,
        title: title,
        src: image.tracedSVG,
        opacity: !this.state.imgLoaded ? 1 : 0,
        transitionDelay: `0.25s`
      }), bgColor && (0, _core.jsx)("div", {
        title: title,
        style: {
          backgroundColor: bgColor,
          width: image.width,
          opacity: !this.state.imgLoaded ? 1 : 0,
          transitionDelay: `0.25s`,
          height: image.height
        }
      }), this.state.isVisible && (0, _core.jsx)(Img, {
        alt: alt,
        title: title,
        width: image.width,
        height: image.height,
        srcSet: image.srcSet,
        src: image.src,
        opacity: this.state.imgLoaded || this.props.fadeIn === false ? 1 : 0,
        onLoad: () => {
          this.setState({
            imgLoaded: true
          });
          this.props.onLoad && this.props.onLoad();
        }
      }), (0, _core.jsx)("noscript", {
        dangerouslySetInnerHTML: {
          __html: noscriptImg(_objectSpread({
            alt,
            title,
            width: image.width,
            height: image.height
          }, image))
        }
      })));
    }

    return null;
  }

}

Image.defaultProps = {
  fadeIn: true,
  alt: ``
};
Image.propTypes = {
  responsiveResolution: _propTypes.default.object,
  responsiveSizes: _propTypes.default.object,
  resolutions: _propTypes.default.object,
  sizes: _propTypes.default.object,
  fadeIn: _propTypes.default.bool,
  title: _propTypes.default.string,
  alt: _propTypes.default.string,
  className: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.object]),
  // Support Glamor's css prop.
  outerWrapperClassName: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.object]),
  style: _propTypes.default.object,
  position: _propTypes.default.string,
  backgroundColor: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.bool]),
  onLoad: _propTypes.default.func
};
var _default = Image;
exports.default = _default;
//# sourceMappingURL=Image.js.map